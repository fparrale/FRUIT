import './polyfills.server.mjs';
import{a as le}from"./chunk-LYTD37HZ.mjs";import{a as re}from"./chunk-C2EAKYVW.mjs";import{a as ee}from"./chunk-3WJVZSSI.mjs";import{a as W,b as k,e as O,g as q,h as te,i as ie,j as ne,k as ae,l as oe,m as z,q as G}from"./chunk-ERC2CRHF.mjs";import{a as $}from"./chunk-PRADOJUI.mjs";import{c as B,d as P}from"./chunk-G2EMQGJ6.mjs";import"./chunk-QGBB7THX.mjs";import{n as K,q as Z}from"./chunk-UTIOHHII.mjs";import{Ac as D,Bb as x,Cb as y,Db as b,Fb as T,Fc as F,Ma as i,Mb as c,Na as I,Nb as m,Za as f,ab as p,ac as J,ca as L,cb as w,eb as l,fb as n,gb as R,jb as V,ka as U,la as h,lb as v,ma as _,nb as u,ta as E,vb as A,wb as d,xb as S,yb as g,zb as Q,zc as N}from"./chunk-RDXAN74U.mjs";import{a as M,b as X}from"./chunk-5XUXGTUW.mjs";function me(r,o){if(r&1&&(l(0,"option",19),d(1),n()),r&2){let e=o.$implicit;p("value",e),i(),S(e)}}function ge(r,o){if(r&1){let e=V();l(0,"div",8)(1,"label",16),d(2),c(3,"translate"),n(),l(4,"select",17),b("ngModelChange",function(t){h(e);let s=u();return y(s.nameValue,t)||(s.nameValue=t),_(t)}),f(5,me,2,2,"option",18),n()()}if(r&2){let e=u();i(2),g(" ",m(3,3,"GRAPHIC.LINGUISTIC_VALUE")," "),i(2),x("ngModel",e.nameValue),i(),p("ngForOf",e.availableValues)}}function he(r,o){if(r&1){let e=V();l(0,"div",8)(1,"label",20),d(2),c(3,"translate"),n(),l(4,"div",21),d(5),n(),l(6,"input",22),b("ngModelChange",function(t){h(e);let s=u();return y(s.nameValue,t)||(s.nameValue=t),_(t)}),n()()}if(r&2){let e=u();i(2),g(" ",m(3,4,"GRAPHIC.LINGUISTIC_VALUE"),""),i(3),S(e.editingValue.nameValue),i(),x("ngModel",e.nameValue),p("value",e.editingValue.nameValue)}}function _e(r,o){r&1&&(l(0,"div",33),d(1,"Debe ser mayor o igual a 0."),n())}function fe(r,o){r&1&&(l(0,"div",33),d(1,"Debe ser mayor o igual a 0."),n())}function xe(r,o){r&1&&(l(0,"div",33),d(1,"Debe ser mayor o igual a 0."),n())}function ye(r,o){r&1&&(l(0,"div",33),d(1,"Debe ser mayor o igual a 0."),n())}function be(r,o){if(r&1&&(l(0,"div",33),d(1),n()),r&2){let e=u(2);i(),S(e.getOrderErrorMessage())}}function ve(r,o){if(r&1){let e=V();l(0,"div",8)(1,"div",23)(2,"label",24),d(3),c(4,"translate"),n(),l(5,"input",25,0),b("ngModelChange",function(t){h(e);let s=u();return y(s.pointA,t)||(s.pointA=t),_(t)}),n(),f(7,_e,2,0,"div",26),n(),l(8,"div",23)(9,"label",27),d(10),c(11,"translate"),n(),l(12,"input",28,1),b("ngModelChange",function(t){h(e);let s=u();return y(s.pointB,t)||(s.pointB=t),_(t)}),n(),f(14,fe,2,0,"div",26),n(),l(15,"div",23)(16,"label",29),d(17),c(18,"translate"),n(),l(19,"input",30,2),b("ngModelChange",function(t){h(e);let s=u();return y(s.pointC,t)||(s.pointC=t),_(t)}),n(),f(21,xe,2,0,"div",26),n(),l(22,"div",23)(23,"label",31),d(24),c(25,"translate"),n(),l(26,"input",32,3),b("ngModelChange",function(t){h(e);let s=u();return y(s.pointD,t)||(s.pointD=t),_(t)}),n(),f(28,ye,2,0,"div",26),n(),f(29,be,2,1,"div",26),n()}if(r&2){let e=A(6),a=A(13),t=A(20),s=A(27),C=u();i(3),g(" ",m(4,21,"GRAPHIC.POINT_A")," (x, 0)"),i(2),w("border-red-500",e.invalid&&e.touched),x("ngModel",C.pointA),i(2),p("ngIf",e.invalid&&(e.dirty||e.touched)),i(3),g("",m(11,23,"GRAPHIC.POINT_B")," (x, 1)"),i(2),w("border-red-500",a.invalid&&a.touched),x("ngModel",C.pointB),i(2),p("ngIf",a.invalid&&(a.dirty||a.touched)),i(3),g("",m(18,25,"GRAPHIC.POINT_C")," (x, 1)"),i(2),w("border-red-500",t.invalid&&t.touched),x("ngModel",C.pointC),i(2),p("ngIf",t.invalid&&(t.dirty||t.touched)),i(3),g("",m(25,27,"GRAPHIC.POINT_D")," (x, 0)"),i(2),w("border-red-500",s.invalid&&s.touched),x("ngModel",C.pointD),i(2),p("ngIf",s.invalid&&(s.dirty||s.touched)),i(),p("ngIf",C.hasValidationErrors()&&C.functionType==="trapezoidal")}}function Ce(r,o){r&1&&(l(0,"div",33),d(1,"Debe ser mayor o igual a 0."),n())}function Ve(r,o){r&1&&(l(0,"div",33),d(1,"Debe ser mayor o igual a 0."),n())}function Ae(r,o){r&1&&(l(0,"div",33),d(1,"Debe ser mayor o igual a 0."),n())}function Se(r,o){if(r&1&&(l(0,"div",33),d(1),n()),r&2){let e=u(2);i(),S(e.getOrderErrorMessage())}}function we(r,o){if(r&1){let e=V();l(0,"div",8)(1,"div",23)(2,"label",34),d(3),c(4,"translate"),n(),l(5,"input",35,0),b("ngModelChange",function(t){h(e);let s=u();return y(s.pointA,t)||(s.pointA=t),_(t)}),n(),f(7,Ce,2,0,"div",26),n(),l(8,"div",23)(9,"label",36),d(10),c(11,"translate"),n(),l(12,"input",37,1),b("ngModelChange",function(t){h(e);let s=u();return y(s.pointB,t)||(s.pointB=t),_(t)}),n(),f(14,Ve,2,0,"div",26),n(),l(15,"div",23)(16,"label",38),d(17),c(18,"translate"),n(),l(19,"input",39,2),b("ngModelChange",function(t){h(e);let s=u();return y(s.pointC,t)||(s.pointC=t),_(t)}),n(),f(21,Ae,2,0,"div",26),n(),f(22,Se,2,1,"div",26),n()}if(r&2){let e=A(6),a=A(13),t=A(20),s=u();i(3),g("",m(4,16,"GRAPHIC.POINT_A")," (x, 0)"),i(2),w("border-red-500",e.invalid&&e.touched),x("ngModel",s.pointA),i(2),p("ngIf",e.invalid&&(e.dirty||e.touched)),i(3),g("",m(11,18,"GRAPHIC.POINT_B")," (x, 1)"),i(2),w("border-red-500",a.invalid&&a.touched),x("ngModel",s.pointB),i(2),p("ngIf",a.invalid&&(a.dirty||a.touched)),i(3),g("",m(18,20,"GRAPHIC.POINT_C")," (x, 0)"),i(2),w("border-red-500",t.invalid&&t.touched),x("ngModel",s.pointC),i(2),p("ngIf",t.invalid&&(t.dirty||t.touched)),i(),p("ngIf",s.hasValidationErrors()&&s.functionType==="triangular")}}function Ie(r,o){if(r&1&&(l(0,"div",33),d(1),n()),r&2){let e=u(2);i(),S(e.getOrderErrorMessage())}}function Me(r,o){if(r&1){let e=V();l(0,"div",8)(1,"div",23)(2,"label",40),d(3),c(4,"translate"),n(),l(5,"input",41),b("ngModelChange",function(t){h(e);let s=u();return y(s.pointA,t)||(s.pointA=t),_(t)}),n()(),l(6,"div",23)(7,"label",42),d(8),c(9,"translate"),n(),l(10,"input",43),b("ngModelChange",function(t){h(e);let s=u();return y(s.pointB,t)||(s.pointB=t),_(t)}),n()(),l(11,"div",23)(12,"label",44),d(13),c(14,"translate"),n(),l(15,"input",45),b("ngModelChange",function(t){h(e);let s=u();return y(s.pointC,t)||(s.pointC=t),_(t)}),n()(),l(16,"div",23)(17,"label",46),d(18),c(19,"translate"),n(),l(20,"input",47),b("ngModelChange",function(t){h(e);let s=u();return y(s.pointD,t)||(s.pointD=t),_(t)}),n()(),l(21,"div",23)(22,"label",48),d(23),c(24,"translate"),n(),l(25,"input",49),b("ngModelChange",function(t){h(e);let s=u();return y(s.pointE,t)||(s.pointE=t),_(t)}),n()(),f(26,Ie,2,1,"div",26),n()}if(r&2){let e=u();i(3),g("",m(4,11,"GRAPHIC.POINT_A")," (x, ?)"),i(2),x("ngModel",e.pointA),i(3),g("",m(9,13,"GRAPHIC.POINT_B")," (x, ?)"),i(2),x("ngModel",e.pointB),i(3),g("",m(14,15,"GRAPHIC.POINT_C")," (x, ?)"),i(2),x("ngModel",e.pointC),i(3),g("",m(19,17,"GRAPHIC.POINT_D")," (x, ?)"),i(2),x("ngModel",e.pointD),i(3),g("",m(24,19,"GRAPHIC.POINT_E")," (x, ?)"),i(2),x("ngModel",e.pointE),i(),p("ngIf",e.hasValidationErrors()&&e.functionType==="sigmoide")}}var H=class r{close=new E;valueAdded=new E;editingValue=null;availableValues=[];nameValue="";functionType="trapezoidal";pointA=null;pointB=null;pointC=null;pointD=null;pointE=null;ngOnInit(){this.editingValue?(this.nameValue=this.editingValue.nameValue,this.functionType=this.editingValue.functionType,this.editingValue.points&&(this.pointA=this.editingValue.points.a,this.pointB=this.editingValue.points.b,this.pointC=this.editingValue.points.c,this.pointD=this.editingValue.points.d,this.pointE=this.editingValue.points.e)):(this.onFunctionTypeChange(),this.nameValue=this.availableValues[0]||"")}onFunctionTypeChange(){this.pointA=null,this.pointB=null,this.pointC=null,this.pointD=null,this.pointE=null}isValid(){return this.nameValue?this.functionType==="trapezoidal"?this.pointA!==null&&this.pointA>=0&&this.pointB!==null&&this.pointB>=0&&this.pointC!==null&&this.pointC>=0&&this.pointD!==null&&this.pointD>=0&&this.pointA<this.pointB&&this.pointB<this.pointC&&this.pointC<this.pointD:this.functionType==="triangular"?this.pointA!==null&&this.pointA>=0&&this.pointB!==null&&this.pointB>=0&&this.pointC!==null&&this.pointC>=0&&this.pointA<this.pointB&&this.pointB<this.pointC:this.functionType==="sigmoide"?this.pointA!==null&&this.pointA>=0&&this.pointB!==null&&this.pointB>=0&&this.pointC!==null&&this.pointC>=0&&this.pointD!==null&&this.pointD>=0&&this.pointE!==null&&this.pointE>=0&&this.pointA<this.pointB&&this.pointB<this.pointC&&this.pointC<this.pointD&&this.pointD<this.pointE:!1:!1}isValidOrder(){return this.functionType==="trapezoidal"?this.pointA!==null&&this.pointB!==null&&this.pointC!==null&&this.pointD!==null&&this.pointA<this.pointB&&this.pointB<this.pointC&&this.pointC<this.pointD:this.functionType==="triangular"?this.pointA!==null&&this.pointB!==null&&this.pointC!==null&&this.pointA<this.pointB&&this.pointB<this.pointC:this.functionType==="sigmoide"?this.pointA!==null&&this.pointB!==null&&this.pointC!==null&&this.pointD!==null&&this.pointE!==null&&this.pointA<this.pointB&&this.pointB<this.pointC&&this.pointC<this.pointD&&this.pointD<this.pointE:!0}getOrderErrorMessage(){return this.functionType==="trapezoidal"?"Los puntos deben estar en orden: A < B < C < D":this.functionType==="triangular"?"Los puntos deben estar en orden: A < B < C":this.functionType==="sigmoide"?"Los puntos deben estar en orden: A < B < C < D < E":""}hasValidationErrors(){return!!(!this.isValidOrder()&&this.allPointsEntered())}allPointsEntered(){return this.functionType==="trapezoidal"?this.pointA!==null&&this.pointB!==null&&this.pointC!==null&&this.pointD!==null:this.functionType==="triangular"?this.pointA!==null&&this.pointB!==null&&this.pointC!==null:this.functionType==="sigmoide"?this.pointA!==null&&this.pointB!==null&&this.pointC!==null&&this.pointD!==null&&this.pointE!==null:!1}addValue(){if(this.isValid()){let o;this.functionType==="trapezoidal"?o={nameValue:this.nameValue,functionType:this.functionType,points:{a:this.pointA,b:this.pointB,c:this.pointC,d:this.pointD}}:this.functionType==="triangular"?o={nameValue:this.nameValue,functionType:this.functionType,points:{a:this.pointA,b:this.pointB,c:this.pointC}}:this.functionType==="sigmoide"&&(o={nameValue:this.nameValue,functionType:this.functionType,points:{a:this.pointA,b:this.pointB,c:this.pointC,d:this.pointD,e:this.pointE}}),this.valueAdded.emit(o),this.closeModal()}}closeModal(){this.close.emit()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=L({type:r,selectors:[["app-linguistic-value"]],inputs:{editingValue:"editingValue",availableValues:"availableValues"},outputs:{close:"close",valueAdded:"valueAdded"},standalone:!0,features:[T],decls:29,vars:19,consts:[["pointAInput","ngModel"],["pointBInput","ngModel"],["pointCInput","ngModel"],["pointDInput","ngModel"],[1,"fixed","top-0","left-0","w-full","h-full","bg-gray-800","bg-opacity-50","flex","justify-center","items-center"],[1,"bg-white","rounded-md","p-6","shadow-lg","w-full","max-w-md"],[1,"text-xl","text-center","font-bold","text-gray-800","mb-6"],["class","mb-4",4,"ngIf"],[1,"mb-4"],["for","functionTypeModal",1,"block","text-gray-700","font-medium","mb-1"],["id","functionTypeModal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm","focus:outline-none","focus:ring-2","focus:ring-[#0D92F4]","focus:border-transparent",3,"ngModelChange","change","ngModel"],["value","trapezoidal"],["value","triangular"],[1,"flex","justify-end","mt-4"],[1,"bg-blue-500","hover:bg-blue-600","text-white","px-4","py-2","rounded-lg","shadow-md",3,"click","disabled"],[1,"ml-2","bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-lg","shadow-md",3,"click"],["for","linguisticValueModal",1,"block","text-gray-700","font-medium","mb-1"],["id","linguisticValueModal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm","focus:outline-none","focus:ring-2","focus:ring-[#0D92F4]","focus:border-transparent",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"block","text-gray-700","font-medium","mb-1"],[1,"py-2","px-3","border","shadow-sm","text-gray-500","bg-gray-50","border","p-3","rounded-xl"],["type","hidden",3,"ngModelChange","ngModel","value"],[1,"mb-2"],["for","pointA_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointA_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["for","pointB_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointB_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointC_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointC_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointD_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointD_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],[1,"text-red-500","text-sm","mt-1"],["for","pointA_t_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointA_t_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointB_t_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointB_t_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointC_t_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointC_t_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointA_s_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointA_s_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointB_s_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointB_s_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointC_s_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointC_s_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointD_s_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointD_s_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointE_s_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointE_s_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"]],template:function(e,a){e&1&&(l(0,"div",4)(1,"div",5)(2,"h6",6),d(3),c(4,"translate"),n(),f(5,ge,6,5,"div",7)(6,he,7,6,"div",7),l(7,"div",8)(8,"label",9),d(9),c(10,"translate"),n(),l(11,"select",10),b("ngModelChange",function(s){return y(a.functionType,s)||(a.functionType=s),s}),v("change",function(){return a.onFunctionTypeChange()}),l(12,"option",11),d(13,"Trapezoidal"),n(),l(14,"option",12),d(15,"Triangular"),n()()(),R(16,"br")(17,"hr")(18,"br"),f(19,ve,30,29,"div",7)(20,we,23,22,"div",7)(21,Me,27,21,"div",7),l(22,"div",13)(23,"button",14),v("click",function(){return a.addValue()}),d(24),c(25,"translate"),n(),l(26,"button",15),v("click",function(){return a.closeModal()}),d(27),c(28,"translate"),n()()()()),e&2&&(i(3),g(" ",m(4,11,a.editingValue?"GRAPHIC.EDIT-VALUE":"GRAPHIC.ADD-VALUE"),""),i(2),p("ngIf",!a.editingValue),i(),p("ngIf",a.editingValue),i(3),g(" ",m(10,13,"GRAPHIC.BELONGING_FUNCTION")," "),i(2),x("ngModel",a.functionType),i(8),p("ngIf",a.functionType==="trapezoidal"),i(),p("ngIf",a.functionType==="triangular"),i(),p("ngIf",a.functionType==="sigmoide"),i(2),p("disabled",!a.isValid()),i(),g(" ",m(25,15,"GRAPHIC.SAVE_CHANGES")," "),i(3),g(" ",m(28,17,"GRAPHIC.CANCEL")," "))},dependencies:[G,ie,ne,W,q,te,k,z,O,D,F,N,P,B]})};function Le(r,o){r&1&&(l(0,"div"),d(1,"El l\xEDmite del eje X es requerido."),n())}function Ee(r,o){if(r&1&&(l(0,"div"),d(1),n()),r&2){let e=u(2);i(),g("Debe ser mayor o igual a ",e.minXLimit,".")}}function Te(r,o){if(r&1&&(l(0,"div",14),f(1,Le,2,0,"div",15)(2,Ee,2,1,"div",15),n()),r&2){u();let e=A(10);i(),p("ngIf",e.errors==null?null:e.errors.required),i(),p("ngIf",e.errors==null?null:e.errors.min)}}function De(r,o){r&1&&(l(0,"div"),d(1,"El salto del eje Y es requerido."),n())}function Be(r,o){r&1&&(l(0,"div"),d(1,"Debe ser mayor o igual a 0.1."),n())}function Pe(r,o){r&1&&(l(0,"div"),d(1,"Debe ser menor o igual a 0.5."),n())}function Ge(r,o){if(r&1&&(l(0,"div",14),f(1,De,2,0,"div",15)(2,Be,2,0,"div",15)(3,Pe,2,0,"div",15),n()),r&2){u();let e=A(17);i(),p("ngIf",e.errors==null?null:e.errors.required),i(),p("ngIf",e.errors==null?null:e.errors.min),i(),p("ngIf",e.errors==null?null:e.errors.max)}}var Y=class r{close=new E;scaleApplied=new E;initialXLimit=1;initialYStep=.5;maxXFromFunctions=1;xAxisLimit=1;yAxisStep=.5;minXLimit=1;hasCustomXLimit=!1;ngOnInit(){this.xAxisLimit=this.initialXLimit,this.yAxisStep=this.initialYStep,this.minXLimit=this.maxXFromFunctions??this.initialXLimit}ngOnChanges(o){if(o.initialXLimit){let e=o.initialXLimit.currentValue;this.minXLimit=e,this.xAxisLimit<this.minXLimit&&(this.xAxisLimit=this.minXLimit)}o.initialYStep&&(this.yAxisStep=o.initialYStep.currentValue)}applyScale(){this.xAxisLimit>=this.minXLimit&&this.yAxisStep>=.1&&this.yAxisStep<=.5&&(this.scaleApplied.emit({xAxisLimit:this.xAxisLimit,yAxisStep:this.yAxisStep}),this.closeModal())}closeModal(){this.close.emit()}updateMinXLimit(o){this.minXLimit=Math.max(this.minXLimit,o),this.xAxisLimit<this.minXLimit&&(this.xAxisLimit=this.minXLimit)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=L({type:r,selectors:[["app-personalize-scale"]],inputs:{initialXLimit:"initialXLimit",initialYStep:"initialYStep",maxXFromFunctions:"maxXFromFunctions"},outputs:{close:"close",scaleApplied:"scaleApplied"},standalone:!0,features:[U,T],decls:26,vars:25,consts:[["xAxisLimitInput","ngModel"],["yAxisStepInput","ngModel"],[1,"fixed","top-0","left-0","w-full","h-full","bg-gray-800","bg-opacity-50","flex","justify-center","items-center"],[1,"bg-white","rounded-md","p-6","shadow-lg","w-full","max-w-md"],[1,"text-xl","font-bold","text-gray-800","mb-4"],[1,"mb-4"],["for","xAxisLimitModal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","xAxisLimitModal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm","focus:outline-none","focus:ring-2","focus:ring-[#0D92F4]","focus:border-transparent",3,"ngModelChange","ngModel","min"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["for","yAxisStepModal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","yAxisStepModal","required","","min","0.1","max","0.5","step","0.1",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm","focus:outline-none","focus:ring-2","focus:ring-[#0D92F4]","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"flex","justify-end","mt-6"],[1,"bg-blue-500","hover:bg-blue-600","text-white","px-4","py-2","rounded-lg","shadow-md",3,"click","disabled"],[1,"ml-2","bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-lg","shadow-md",3,"click"],[1,"text-red-500","text-sm","mt-1"],[4,"ngIf"]],template:function(e,a){if(e&1){let t=V();l(0,"div",2)(1,"div",3)(2,"h6",4),d(3),c(4,"translate"),n(),l(5,"div",5)(6,"label",6),d(7),c(8,"translate"),n(),l(9,"input",7,0),b("ngModelChange",function(C){return h(t),y(a.xAxisLimit,C)||(a.xAxisLimit=C),_(C)}),n(),f(11,Te,3,2,"div",8),n(),l(12,"div",5)(13,"label",9),d(14),c(15,"translate"),n(),l(16,"input",10,1),b("ngModelChange",function(C){return h(t),y(a.yAxisStep,C)||(a.yAxisStep=C),_(C)}),n(),f(18,Ge,4,3,"div",8),n(),l(19,"div",11)(20,"button",12),v("click",function(){return h(t),_(a.applyScale())}),d(21),c(22,"translate"),n(),l(23,"button",13),v("click",function(){return h(t),_(a.closeModal())}),d(24),c(25,"translate"),n()()()()}if(e&2){let t=A(10),s=A(17);i(3),S(m(4,15,"GRAPHIC.CUSTOM_SCALE")),i(4),S(m(8,17,"GRAPHIC.LIMIT_X")),i(2),w("border-red-500",t.invalid&&t.touched),x("ngModel",a.xAxisLimit),p("min",a.minXLimit),i(2),p("ngIf",t.invalid&&(t.dirty||t.touched)),i(3),g(" ",m(15,19,"GRAPHIC.JUMP_Y")," (min 0.1, max 0.5)"),i(2),w("border-red-500",s.invalid&&s.touched),x("ngModel",a.yAxisStep),i(2),p("ngIf",s.invalid&&(s.dirty||s.touched)),i(2),p("disabled",!t.valid||!s.valid),i(),g(" ",m(22,21,"GRAPHIC.APLICATION")," "),i(3),g(" ",m(25,23,"GRAPHIC.CANCEL")," ")}},dependencies:[G,W,q,k,z,oe,ae,O,D,P,B]})};function Xe(r,o){if(r&1){let e=V();l(0,"div",16)(1,"span",17),d(2),n(),l(3,"button",18),v("click",function(){let t=h(e).$implicit,s=u();return _(s.openEditValueModal(t))}),l(4,"span",19),d(5,"edit"),n()()()}if(r&2){let e=o.$implicit;i(2),S(e.nameValue)}}function Re(r,o){r&1&&(l(0,"div",20),d(1),c(2,"translate"),n()),r&2&&(i(),g(" ",m(2,1,"GRAPHIC.NOT_LINGUISTIC_VARIABLE")," "))}function Ne(r,o){if(r&1){let e=V();l(0,"div",21)(1,"app-linguistic-value",22),v("close",function(){h(e);let t=u();return _(t.closeAddValueModal())})("valueAdded",function(t){h(e);let s=u();return _(s.onValueAdded(t))}),n()()}if(r&2){let e=u();i(),p("availableValues",e.currentVariableValues)}}function Fe(r,o){if(r&1){let e=V();l(0,"div",21)(1,"app-linguistic-value",23),v("close",function(){h(e);let t=u();return _(t.closeEditValueModal())})("valueAdded",function(t){h(e);let s=u();return _(s.onValueEdited(t))}),n()()}if(r&2){let e=u();i(),p("availableValues",e.currentVariableValues)("editingValue",e.editingValue)}}function We(r,o){if(r&1){let e=V();l(0,"div",21)(1,"app-personalize-scale",24),v("scaleApplied",function(t){h(e);let s=u();return _(s.onScaleApplied(t))})("close",function(){h(e);let t=u();return _(t.closeScaleModal())}),n()()}if(r&2){let e=u();i(),p("initialXLimit",e.currentXAxisLimit)("initialYStep",e.currentYAxisStep)("maxXFromFunctions",e.maxXFromFunctions)}}var j=class r{constructor(o,e,a,t,s,C){this.route=o;this.alertService=e;this.gameDataService=a;this.cdr=t;this.graficChartService=s;this.router=C;this.updateXAxisLimit()}modalTitle="Agregar valor ling\xFC\xEDstico";isEditing=!1;selectedLinguisticVariable="";showAddValueModal=!1;showEditValueModal=!1;showScaleModal=!1;currentXAxisLimit=1;currentYAxisStep=.5;initialXLimit=1;initialYStep=.5;chartData={linguisticVariable:"",linguisticValues:[],xAxisLimit:this.currentXAxisLimit,yAxisStep:this.currentYAxisStep};editingValue=null;maxXFromFunctions=0;game_room_id=48;question_id=1;rnf_desc="";currentVariableValues=[];isEditMode=!1;resultData=null;ngOnInit(){this.game_room_id=Number(this.gameDataService.getGameRoomIdLocalStorage())??0,this.question_id=Number(this.gameDataService.getQuestionIDLocalStorage())??0;let e=this.gameDataService.getQuestionsGameLocalStorage()?.find(a=>a.id===this.question_id);if(this.route.queryParams.subscribe(a=>{this.isEditMode=a.edit==="true"}),!this.isEditMode){let a=localStorage.getItem(`editMode_${this.question_id}`);this.isEditMode=a==="true"}if(this.game_room_id===0||this.question_id===0||!e){this.gameDataService.removeGameRoomIdLocalStorage(),this.gameDataService.clearQuestionIDLocalStorage(),this.gameDataService.clearQuestionsGameLocalStorage(),this.gameDataService.clearGameResultLocalStorage(),this.router.navigate(["/game"],{queryParams:{mode:"find"}});return}this.rnf_desc=e.nfr||"",this.selectedLinguisticVariable=e.variable||"",this.currentVariableValues=[e.value,e.recomend],this.chartData.linguisticVariable=this.selectedLinguisticVariable,this.isEditMode?this.graficChartService.getGraficByRoomAndQuestionAndUser(this.game_room_id,this.question_id,-1).subscribe(a=>{a.data.length>0?(this.chartData=a.data[0].data,this.chartData.linguisticVariable=this.selectedLinguisticVariable,this.currentXAxisLimit=this.chartData.xAxisLimit,this.currentYAxisStep=this.chartData.yAxisStep):console.log("No hay datos de la gr\xE1fica para esta sala y pregunta.")},a=>{console.error("Error al obtener la gr\xE1fica:",a.message)}):this.chartData.linguisticVariable=this.selectedLinguisticVariable}backResults(){this.chartData.linguisticValues.length>0&&!confirm("La grafica no se ha guardado. \xBFDesea continuar?")||this.router.navigate(["/results"])}saveGrafic(){if(this.chartData.linguisticValues.length!==2){this.alertService.showAlert("Faltan valores lingu\xEDsticos por graficar.",!0);return}let o={game_room_id:this.game_room_id,question_id:this.question_id,data:this.chartData};this.isEditMode?this.graficChartService.updateGraphics(o).subscribe(()=>{this.alertService.showAlert("Gr\xE1fica actualizada correctamente.",!1),this.router.navigate(["/results"])},e=>{console.error("Error al actualizar la gr\xE1fica:",e.message)}):this.graficChartService.createGraphics(o).subscribe(()=>{this.alertService.showAlert("Gr\xE1fica guardada correctamente.",!1),this.graficChartService.markRnfAsGraphed(this.question_id.toString()),this.router.navigate(["/results"])},e=>{console.error("Error al guardar la gr\xE1fica:",e.message)})}areNewValuesAvailable(){return this.currentVariableValues=this.currentVariableValues.filter(o=>!this.chartData.linguisticValues.some(e=>e.nameValue===o)),this.currentVariableValues.length>0}closeAddValueModal(){this.showAddValueModal=!1}openAddValueModal(){this.editingValue=null,this.showAddValueModal=!0,this.currentVariableValues=this.currentVariableValues.filter(o=>!this.chartData.linguisticValues.some(e=>e.nameValue===o))}openEditValueModal(o){o?(this.editingValue=X(M({},o),{isEditing:!0}),this.modalTitle="Editar valor ling\xFC\xEDstico",this.isEditing=!0):(this.editingValue={isEditing:!1},this.modalTitle="Agregar valor ling\xFC\xEDstico",this.isEditing=!1),this.showEditValueModal=!0}closeEditValueModal(){this.showEditValueModal=!1,this.editingValue=null}onValueAdded(o){this.chartData=X(M({},this.chartData),{linguisticValues:[...this.chartData.linguisticValues,o]}),this.updateXAxisLimit(),this.currentXAxisLimit=Math.max(this.currentXAxisLimit,this.initialXLimit),this.chartData.xAxisLimit=this.currentXAxisLimit}onValueEdited(o){let e=this.chartData.linguisticValues.findIndex(a=>a.nameValue===o.nameValue);if(e!==-1){let a=[...this.chartData.linguisticValues];a[e]=M({},o),this.chartData=X(M({},this.chartData),{linguisticValues:a}),this.updateXAxisLimit(),this.currentXAxisLimit=Math.max(this.currentXAxisLimit,this.initialXLimit),this.chartData.xAxisLimit=this.currentXAxisLimit,this.cdr.detectChanges()}this.closeEditValueModal()}openScaleModal(){this.updateXAxisLimit(),this.initialXLimit=this.currentXAxisLimit,this.initialYStep=this.currentYAxisStep,this.cdr.detectChanges(),this.showScaleModal=!0,this.maxXFromFunctions=this.getMaxXFromAllFunctions()}closeScaleModal(){this.showScaleModal=!1}onScaleApplied(o){this.currentXAxisLimit=o.xAxisLimit,this.currentYAxisStep=o.yAxisStep,this.chartData=X(M({},this.chartData),{xAxisLimit:this.currentXAxisLimit,yAxisStep:this.currentYAxisStep})}updateXAxisLimit(){let o=0;this.chartData.linguisticValues.forEach(e=>{e.functionType==="trapezoidal"&&e.points?o=Math.max(o,e.points.a,e.points.b,e.points.c,e.points.d):e.functionType==="triangular"&&e.points?o=Math.max(o,e.points.a,e.points.b,e.points.c):e.functionType==="sigmoide"&&e.points&&(o=Math.max(o,e.points.a,e.points.b,e.points.c,e.points.d,e.points.e))}),this.initialXLimit=Math.max(1,o),this.currentXAxisLimit<this.initialXLimit&&(this.currentXAxisLimit=this.initialXLimit,this.chartData.xAxisLimit=this.currentXAxisLimit)}getMaxXFromAllFunctions(){let o=0;return this.chartData.linguisticValues.forEach(e=>{e.functionType==="trapezoidal"&&e.points?o=Math.max(o,e.points.a,e.points.b,e.points.c,e.points.d):e.functionType==="triangular"&&e.points?o=Math.max(o,e.points.a,e.points.b,e.points.c):e.functionType==="sigmoide"&&e.points&&(o=Math.max(o,e.points.a,e.points.b,e.points.c,e.points.d,e.points.e))}),o}static \u0275fac=function(e){return new(e||r)(I(K),I($),I(ee),I(J),I(re),I(Z))};static \u0275cmp=L({type:r,selectors:[["app-grafic"]],standalone:!0,features:[T],decls:37,vars:31,consts:[[1,"bg-white","rounded-md","p-4","container","mx-auto"],[1,"mb-4","text-xl","font-semibold","text-gray-800"],[1,"bg-white","rounded-md","p-4","flex","items-center","mb-4","justify-between"],[1,"text-left","font-semibold"],[1,"text-left"],[1,"ml-4","min-w-[150px]","bg-blue-500","hover:bg-blue-600","text-white","px-4","py-2","rounded-lg","shadow-md",3,"click","disabled"],[1,"bg-gray-50","rounded-md","p-4","mb-4"],[1,"col-span-full","mb-1","font-semibold"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","gap-2"],["class","flex items-center justify-between border rounded-xl p-2 bg-white",4,"ngFor","ngForOf"],["class","text-gray-400 italic col-span-full",4,"ngIf"],[1,"mb-4","bg-white","rounded-md","p-4"],[3,"chartData","linguisticVariable"],[1,"ml-4","min-w-[150px]","bg-blue-500","hover:bg-blue-600","text-white","px-4","py-2","rounded-lg","shadow-md",3,"click"],[1,"bg-[#28A745]","hover:bg-green-700","text-white","px-4","py-2","rounded-lg","shadow-md","focus:outline-none","transition","duration-300",3,"click"],["class","fixed top-0 left-0 w-full h-full bg-gray-800 bg-opacity-50 flex justify-center items-center",4,"ngIf"],[1,"flex","items-center","justify-between","border","rounded-xl","p-2","bg-white"],[1,"text-gray-700"],[1,"text-blue-800","font-semibold","py-1","px-2","rounded","focus:outline-none","focus:shadow-outline",3,"click"],[1,"material-icons","text-blue-500"],[1,"text-gray-400","italic","col-span-full"],[1,"fixed","top-0","left-0","w-full","h-full","bg-gray-800","bg-opacity-50","flex","justify-center","items-center"],[3,"close","valueAdded","availableValues"],[3,"close","valueAdded","availableValues","editingValue"],[3,"scaleApplied","close","initialXLimit","initialYStep","maxXFromFunctions"]],template:function(e,a){e&1&&(l(0,"div",0)(1,"div",1),d(2),c(3,"translate"),n(),l(4,"div",2)(5,"div")(6,"label",3),d(7),c(8,"translate"),n(),l(9,"label",4),d(10),n()(),l(11,"button",5),v("click",function(){return a.openAddValueModal()}),d(12),c(13,"translate"),n()(),l(14,"div",6)(15,"div",7),d(16),c(17,"translate"),n(),l(18,"div",8),f(19,Xe,6,1,"div",9)(20,Re,3,3,"div",10),n()(),l(21,"div",11),R(22,"app-line-chart",12),n(),l(23,"div",2)(24,"div")(25,"button",13),v("click",function(){return a.backResults()}),d(26),c(27,"translate"),n(),l(28,"button",13),v("click",function(){return a.saveGrafic()}),d(29),c(30,"translate"),n()(),l(31,"button",14),v("click",function(){return a.openScaleModal()}),d(32),c(33,"translate"),n()(),f(34,Ne,2,1,"div",15)(35,Fe,2,2,"div",15)(36,We,2,3,"div",15),n()),e&2&&(i(2),Q("",m(3,17,"QUESTION.NFR"),": ",a.rnf_desc,""),i(5),g("",m(8,19,"GRAPHIC.LINGUISTIC_VARIABLE"),": "),i(3),S(a.selectedLinguisticVariable),i(),p("disabled",!a.areNewValuesAvailable()),i(),g(" ",m(13,21,"GRAPHIC.ADD-VALUE")," "),i(4),g(" ",m(17,23,"GRAPHIC.LINGUISTIC_VALUES")," "),i(3),p("ngForOf",a.chartData.linguisticValues),i(),p("ngIf",a.chartData.linguisticValues.length===0),i(2),p("chartData",a.chartData)("linguisticVariable",a.selectedLinguisticVariable),i(4),g(" ",m(27,25,"GRAPHIC.BACK")," "),i(3),g(" ",m(30,27,"GRAPHIC.SAVE_CHANGES")," "),i(3),g(" ",m(33,29,"GRAPHIC.CUSTOM_SCALE")," "),i(2),p("ngIf",a.showAddValueModal),i(),p("ngIf",a.showEditValueModal),i(),p("ngIf",a.showScaleModal))},dependencies:[F,N,D,G,H,Y,le,P,B]})};export{j as default};
