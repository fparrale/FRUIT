import{a as P}from"./chunk-MR3HQY2Z.js";import{a as F}from"./chunk-EZWTN7FR.js";import{a as B}from"./chunk-7A353QXV.js";import{c as O,d as A}from"./chunk-JOV6O4AC.js";import{l as k}from"./chunk-DQ7YWZBQ.js";import{Ab as r,Ac as N,Bb as m,Cb as u,Eb as y,Jb as D,Mb as L,Qa as t,Qb as s,Ra as x,Rb as p,bb as v,eb as d,hb as T,ia as h,ib as o,jb as n,kb as _,nb as C,pb as f,ra as I,rb as g,sa as R,ta as E,tc as G,uc as w,vc as U}from"./chunk-NJXLY5TY.js";var M=(a,i)=>({"text-green-500":a,"text-red-500":i});function Q(a,i){a&1&&(o(0,"span",26),r(1,"\u2714"),n())}function j(a,i){a&1&&(o(0,"span",27),r(1,"\u2716"),n())}function V(a,i){if(a&1&&(o(0,"p",28)(1,"strong"),r(2),s(3,"translate"),n(),r(4),n()),a&2){let e=g(2).$implicit;t(2),m(p(3,2,"RESULTS.FEEDBACK")),t(2),u(" ",e.feedback_variable||"No se proporcion\xF3 feedback"," ")}}function $(a,i){a&1&&(o(0,"span",26),r(1,"\u2714"),n())}function q(a,i){a&1&&(o(0,"span",27),r(1,"\u2716"),n())}function H(a,i){if(a&1&&(o(0,"p",28)(1,"strong"),r(2),s(3,"translate"),n(),r(4),n()),a&2){let e=g(2).$implicit;t(2),m(p(3,2,"RESULTS.FEEDBACK")),t(2),u(" ",e.feedback_value||"No se proporcion\xF3 feedback"," ")}}function W(a,i){a&1&&(o(0,"span",26),r(1,"\u2714"),n())}function K(a,i){a&1&&(o(0,"span",27),r(1,"\u2716"),n())}function Y(a,i){if(a&1&&(o(0,"p",28)(1,"strong"),r(2),s(3,"translate"),n(),r(4),n()),a&2){let e=g(2).$implicit;t(2),m(p(3,2,"RESULTS.FEEDBACK")),t(2),u(" ",e.feedback_recomend||"No se proporcion\xF3 feedback"," ")}}function J(a,i){if(a&1&&(o(0,"div",18)(1,"div",19)(2,"h6",20)(3,"span"),r(4),s(5,"translate"),n(),v(6,Q,2,0,"span",21)(7,j,2,0,"span",22),n(),o(8,"p",23),r(9),s(10,"translate"),o(11,"strong"),r(12),n()(),v(13,V,5,4,"p",24),n(),_(14,"div",25),o(15,"div",19)(16,"h6",20)(17,"span"),r(18),s(19,"translate"),n(),v(20,$,2,0,"span",21)(21,q,2,0,"span",22),n(),o(22,"p",23),r(23),s(24,"translate"),o(25,"strong"),r(26),n()(),v(27,H,5,4,"p",24),n(),_(28,"div",25),o(29,"div",19)(30,"h6",20)(31,"span"),r(32),s(33,"translate"),n(),v(34,W,2,0,"span",21)(35,K,2,0,"span",22),n(),o(36,"p",23),r(37),s(38,"translate"),o(39,"strong"),r(40),n()(),v(41,Y,5,4,"p",24),n()()),a&2){let e=g().$implicit;t(4),m(p(5,18,"RESULTS.LINGUISTIC_VARIABLE")),t(2),d("ngIf",e.correct_variable),t(),d("ngIf",!e.correct_variable),t(2),u("",p(10,20,"RESULTS.YOUR_ANSWER")," "),t(3),m(e.user_variable),t(),d("ngIf",!e.correct_variable),t(5),m(p(19,22,"RESULTS.LINGUISTIC_VALUE")),t(2),d("ngIf",e.correct_value),t(),d("ngIf",!e.correct_value),t(2),u("",p(24,24,"RESULTS.YOUR_ANSWER")," "),t(3),m(e.user_value),t(),d("ngIf",!e.correct_value),t(5),m(p(33,26,"RESULTS.LINGUISTIC_RECOMMENDATION")),t(2),d("ngIf",e.correct_recomend),t(),d("ngIf",!e.correct_recomend),t(2),u("",p(38,28,"RESULTS.YOUR_ANSWER")," "),t(3),m(e.user_recomend),t(),d("ngIf",!e.correct_recomend)}}function z(a,i){if(a&1){let e=C();o(0,"div",11)(1,"div",12),f("click",function(){let c=I(e).index,S=g();return R(S.toggleCard(c))}),o(2,"div")(3,"h6",13),r(4),s(5,"translate"),n(),o(6,"button",14),f("click",function(c){let S=I(e).$implicit;return g().goGrafic(S.id),R(c.stopPropagation())}),r(7),s(8,"translate"),n()(),E(),o(9,"svg",15),_(10,"path",16),n()(),v(11,J,42,30,"div",17),n()}if(a&2){let e=i.$implicit,l=i.index,c=g();t(4),y("",p(5,8,"QUESTION.NFR")," ",l+1,": ",e.nfr,""),t(2),d("ngClass",c.isRnfGraphed(e.id)?"bg-blue-500 hover:bg-blue-700":"bg-[#28A745] hover:bg-green-700"),t(),u(" ",p(8,10,c.isRnfGraphed(e.id)?"RESULTS.BUTTON_EDIT_GRAPH":"RESULTS.BUTTON_CREATE_GRAPH")," "),t(2),T(c.expandedIndex===l?"rotate-180":""),t(2),d("ngIf",c.expandedIndex===l)}}var b=class a{constructor(i,e,l,c){this.gameRoomService=i;this.gameDataService=e;this.router=l;this.graficService=c}resultData=null;expandedIndex=null;ngOnInit(){let i=this.gameDataService.getGameResult();this.graficService.loadGraphedRnfIds(),i&&i.data?(this.resultData=i.data,this.gameDataService.setGameResultLocalStorage(JSON.stringify(this.resultData))):this.gameDataService.getGameResultLocalStorage()!==null?this.resultData=this.gameDataService.getGameResultLocalStorage():(this.gameDataService.removeGameRoomIdLocalStorage(),this.gameDataService.clearQuestionIDLocalStorage(),this.gameDataService.clearQuestionsGameLocalStorage(),this.gameDataService.clearGameResultLocalStorage(),this.router.navigate(["/game"],{queryParams:{mode:"find"}}))}toggleCard(i){this.expandedIndex=this.expandedIndex===i?null:i}backHome(){this.gameDataService.removeGameRoomIdLocalStorage(),this.gameDataService.clearQuestionIDLocalStorage(),this.gameDataService.clearQuestionsGameLocalStorage(),this.gameDataService.clearGameResultLocalStorage(),localStorage.removeItem("graphedRnfIds");for(let i=0;i<localStorage.length;i++){let e=localStorage.key(i);e&&e.startsWith("editMode_")&&(localStorage.removeItem(e),i--)}this.router.navigate(["/game"],{queryParams:{mode:"find"}})}goGrafic(i){this.gameDataService.setQuestionIDLocalStorage(i);let e=this.isRnfGraphed(i);localStorage.setItem(`editMode_${i}`,e.toString()),this.gameDataService.getQuestionsGameLocalStorage()===null?this.gameRoomService.getGameRoomQuestions(Number(this.gameDataService.getGameRoomIdLocalStorage())??0).subscribe(l=>{this.gameDataService.setQuestionsGameLocalStorage(JSON.stringify(l.questions)),this.router.navigate(["/grafic"],{queryParams:{edit:e}})},l=>{console.error("Error al obtener preguntas de la sala:",l.message)}):this.router.navigate(["/grafic"],{queryParams:{edit:e}})}isRnfGraphed(i){return this.graficService.isRnfGraphed(i)}static \u0275fac=function(e){return new(e||a)(x(F),x(B),x(k),x(P))};static \u0275cmp=h({type:a,selectors:[["app-results"]],standalone:!0,features:[D],decls:20,vars:18,consts:[[1,"p-6","min-h-screen","flex","flex-col","items-center"],[1,"w-full","max-w-3xl","flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-blue-600"],[1,"bg-white","rounded-2xl","shadow-md","px-6","py-3","flex","flex-col","items-center","justify-center"],[1,"text-sm","font-semibold","text-gray-700"],[1,"text-lg","font-bold",3,"ngClass"],[1,"w-full","max-w-3xl","space-y-4"],[1,"text-xl","font-semibold","text-gray-700","mb-4"],["class","bg-white rounded-2xl border border-gray-300 shadow-md hover:shadow-lg transition overflow-hidden",4,"ngFor","ngForOf"],[1,"navigation-buttons","flex","justify-center","items-center","mt-6","space-x-4"],[1,"bg-[#4A90E2]","text-white","px-4","py-2","rounded-lg","shadow-md","disabled:opacity-50",3,"click"],[1,"bg-white","rounded-2xl","border","border-gray-300","shadow-md","hover:shadow-lg","transition","overflow-hidden"],[1,"cursor-pointer","p-4","flex","justify-between","items-center","rounded-t-xl","bg-blue-100","hover:bg-blue-200","transition",3,"click"],[1,"text-sm","font-bold","text-blue-700","flex-1"],[1,"text-white","px-4","py-2","rounded-lg","shadow-md","disabled:opacity-50",3,"click","ngClass"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","3",1,"transform","transition-transform","w-5","h-5","text-gray-700","ml-2","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","d","M19 9l-7 7-7-7"],["class","p-4 border-t border-gray-300 bg-gray-50 rounded-b-lg",4,"ngIf"],[1,"p-4","border-t","border-gray-300","bg-gray-50","rounded-b-lg"],[1,"mb-4"],[1,"text-sm","font-semibold","text-blue-600","flex","items-center"],["class","ml-2 text-green-500",4,"ngIf"],["class","ml-2 text-red-500",4,"ngIf"],[1,"text-sm","text-gray-800"],["class","text-xs text-red-600 mt-1",4,"ngIf"],[1,"pt-4","border-t","border-gray-300"],[1,"ml-2","text-green-500"],[1,"ml-2","text-red-500"],[1,"text-xs","text-red-600","mt-1"]],template:function(e,l){e&1&&(o(0,"div",0)(1,"div",1)(2,"h5",2),r(3),s(4,"translate"),n(),o(5,"div",3)(6,"h6",4),r(7),s(8,"translate"),n(),o(9,"p",5),r(10),n()()(),o(11,"div",6)(12,"h5",7),r(13),s(14,"translate"),n(),v(15,z,12,12,"div",8),n(),o(16,"div",9)(17,"button",10),f("click",function(){return l.backHome()}),r(18),s(19,"translate"),n()()()),e&2&&(t(3),m(p(4,7,"RESULTS.TITLE")),t(4),m(p(8,9,"RESULTS.TOTAL_SCORE")),t(2),d("ngClass",L(15,M,((l.resultData==null?null:l.resultData.total_score)||0)>=70,((l.resultData==null?null:l.resultData.total_score)||0)<70)),t(),u(" ",l.resultData==null?null:l.resultData.total_score," / 100 "),t(3),m(p(14,11,"RESULTS.DETAILS")),t(2),d("ngForOf",l.resultData==null?null:l.resultData.result),t(3),u(" ",p(19,13,"RESULTS.BUTTON_FINISH")," "))},dependencies:[N,G,w,U,A,O]})};export{b as default};
