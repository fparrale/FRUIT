import{a as fe}from"./chunk-G3YWFFNN.js";import{a as ge}from"./chunk-MR3HQY2Z.js";import{a as W,b as O,e as z,g as q,h as se,i as de,j as pe,k as ue,l as ce,m as H,q as G}from"./chunk-LMQWO4W5.js";import{a as le}from"./chunk-7A353QXV.js";import{a as me}from"./chunk-3YFKICGA.js";import{c as F,d as X}from"./chunk-JOV6O4AC.js";import{j as oe,l as re}from"./chunk-DQ7YWZBQ.js";import{Ab as d,Ac as P,Bb as B,Cb as c,Db as ne,Fb as v,Gb as b,Hb as C,Jb as M,La as ie,Qa as a,Qb as m,Ra as T,Rb as g,a as L,ac as ae,b as N,bb as x,eb as p,gb as w,ia as I,ib as l,jb as o,kb as V,nb as S,pb as y,qa as $,ra as f,rb as u,sa as h,ta as ee,tc as R,ua as te,uc as k,vc as E,za as D,zb as A}from"./chunk-NJXLY5TY.js";function Ce(r,n){if(r&1&&V(0,"img",7),r&2){let e=u();p("src",e.imageSrc,ie)("alt",e.getImageAlt())}}var U=class r{imageSrc="";imageAlt="";text="";width="w-96";getImageAlt(){return this.imageAlt}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=I({type:r,selectors:[["app-tooltip-info"]],inputs:{imageSrc:"imageSrc",imageAlt:"imageAlt",text:"text",width:"width"},standalone:!0,features:[M],decls:8,vars:3,consts:[[1,"relative","flex-shrink-0"],[1,"inline-block","relative","group","cursor-pointer","pointer-events-auto"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M12 2a10 10 0 100 20 10 10 0 000-20z"],[1,"absolute","right-full","top-1/2","-translate-y-1/2","mr-3","w-96","p-4","bg-white/95","backdrop-blur","border","rounded-lg","shadow-lg","opacity-0","scale-95","group-hover:opacity-100","group-hover:scale-105","transition-all","duration-200","z-50","pointer-events-none",3,"ngClass"],["class","w-full h-auto rounded mb-3",3,"src","alt",4,"ngIf"],[1,"text-base","text-left","text-gray-500"],[1,"w-full","h-auto","rounded","mb-3",3,"src","alt"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"div",1),ee(),l(2,"svg",2),V(3,"path",3),o(),te(),l(4,"div",4),x(5,Ce,1,2,"img",5),l(6,"p",6),d(7),o()()()()),e&2&&(a(4),p("ngClass",t.width),a(),p("ngIf",t.imageSrc),a(2),c(" ",t.text," "))},dependencies:[P,R,E],encapsulation:2})};function Ve(r,n){if(r&1&&(l(0,"option",20),d(1),o()),r&2){let e=n.$implicit;p("value",e),a(),c(" ",e," ")}}function Se(r,n){if(r&1){let e=S();l(0,"div",8)(1,"label",17),d(2),m(3,"translate"),o(),l(4,"select",18),C("ngModelChange",function(i){f(e);let s=u();return b(s.nameValue,i)||(s.nameValue=i),h(i)}),x(5,Ve,2,2,"option",19),o()()}if(r&2){let e=u();a(2),c(" ",g(3,3,"GRAPHIC.LINGUISTIC_VALUE")," "),a(2),v("ngModel",e.nameValue),a(),p("ngForOf",e.availableValues)}}function Ae(r,n){if(r&1){let e=S();l(0,"div",8)(1,"label",21),d(2),m(3,"translate"),o(),l(4,"div",22),d(5),o(),l(6,"input",23),C("ngModelChange",function(i){f(e);let s=u();return b(s.nameValue,i)||(s.nameValue=i),h(i)}),o()()}if(r&2){let e=u();a(2),c(" ",g(3,4,"GRAPHIC.LINGUISTIC_VALUE"),""),a(3),c(" ",e.editingValue.nameValue," "),a(),v("ngModel",e.nameValue),p("value",e.editingValue.nameValue)}}function we(r,n){r&1&&(l(0,"div",37),d(1," Debe ser mayor o igual a 0. "),o())}function Ie(r,n){r&1&&(l(0,"div",37),d(1," Debe ser mayor o igual a 0. "),o())}function Me(r,n){r&1&&(l(0,"div",37),d(1," Debe ser mayor o igual a 0. "),o())}function Ee(r,n){r&1&&(l(0,"div",37),d(1," Debe ser mayor o igual a 0. "),o())}function Te(r,n){if(r&1&&(l(0,"div",37),d(1),o()),r&2){let e=u(2);a(),c(" ",e.getOrderErrorMessage()," ")}}function Le(r,n){if(r&1){let e=S();l(0,"div",8)(1,"div",8)(2,"label",24),V(3,"app-tooltip-info",25),d(4),m(5,"translate"),o(),l(6,"input",26,0),C("ngModelChange",function(i){f(e);let s=u();return b(s.pointA,i)||(s.pointA=i),h(i)}),o(),x(8,we,2,0,"div",27),o(),l(9,"div",8)(10,"label",28),V(11,"app-tooltip-info",29),d(12),m(13,"translate"),o(),l(14,"input",30,1),C("ngModelChange",function(i){f(e);let s=u();return b(s.pointB,i)||(s.pointB=i),h(i)}),o(),x(16,Ie,2,0,"div",27),o(),l(17,"div",8)(18,"label",31),V(19,"app-tooltip-info",32),d(20),m(21,"translate"),o(),l(22,"input",33,2),C("ngModelChange",function(i){f(e);let s=u();return b(s.pointC,i)||(s.pointC=i),h(i)}),o(),x(24,Me,2,0,"div",27),o(),l(25,"div",8)(26,"label",34),V(27,"app-tooltip-info",35),d(28),m(29,"translate"),o(),l(30,"input",36,3),C("ngModelChange",function(i){f(e);let s=u();return b(s.pointD,i)||(s.pointD=i),h(i)}),o(),x(32,Ee,2,0,"div",27),o(),x(33,Te,2,1,"div",27),o()}if(r&2){let e=A(7),t=A(15),i=A(23),s=A(31),_=u();a(4),c(" ",g(5,21,"GRAPHIC.POINT_A")," (x, 0) "),a(2),w("border-red-500",e.invalid&&e.touched),v("ngModel",_.pointA),a(2),p("ngIf",e.invalid&&(e.dirty||e.touched)),a(4),c(" ",g(13,23,"GRAPHIC.POINT_B")," (x, 1)"),a(2),w("border-red-500",t.invalid&&t.touched),v("ngModel",_.pointB),a(2),p("ngIf",t.invalid&&(t.dirty||t.touched)),a(4),c(" ",g(21,25,"GRAPHIC.POINT_C")," (x, 1)"),a(2),w("border-red-500",i.invalid&&i.touched),v("ngModel",_.pointC),a(2),p("ngIf",i.invalid&&(i.dirty||i.touched)),a(4),c(" ",g(29,27,"GRAPHIC.POINT_D")," (x, 0)"),a(2),w("border-red-500",s.invalid&&s.touched),v("ngModel",_.pointD),a(2),p("ngIf",s.invalid&&(s.dirty||s.touched)),a(),p("ngIf",_.hasValidationErrors()&&_.functionType==="trapezoidal")}}function De(r,n){r&1&&(l(0,"div",37),d(1," Debe ser mayor o igual a 0. "),o())}function Be(r,n){r&1&&(l(0,"div",37),d(1," Debe ser mayor o igual a 0. "),o())}function Pe(r,n){r&1&&(l(0,"div",37),d(1," Debe ser mayor o igual a 0. "),o())}function Ge(r,n){if(r&1&&(l(0,"div",37),d(1),o()),r&2){let e=u(2);a(),c(" ",e.getOrderErrorMessage()," ")}}function Fe(r,n){if(r&1){let e=S();l(0,"div",8)(1,"div",38)(2,"label",39),V(3,"app-tooltip-info",40),d(4),m(5,"translate"),o(),l(6,"input",41,0),C("ngModelChange",function(i){f(e);let s=u();return b(s.pointA,i)||(s.pointA=i),h(i)}),o(),x(8,De,2,0,"div",27),o(),l(9,"div",38)(10,"label",42),V(11,"app-tooltip-info",43),d(12),m(13,"translate"),o(),l(14,"input",44,1),C("ngModelChange",function(i){f(e);let s=u();return b(s.pointB,i)||(s.pointB=i),h(i)}),o(),x(16,Be,2,0,"div",27),o(),l(17,"div",38)(18,"label",45),V(19,"app-tooltip-info",46),d(20),m(21,"translate"),o(),l(22,"input",47,2),C("ngModelChange",function(i){f(e);let s=u();return b(s.pointC,i)||(s.pointC=i),h(i)}),o(),x(24,Pe,2,0,"div",27),o(),x(25,Ge,2,1,"div",27),o()}if(r&2){let e=A(7),t=A(15),i=A(23),s=u();a(4),c(" ",g(5,16,"GRAPHIC.POINT_A")," (x, 0)"),a(2),w("border-red-500",e.invalid&&e.touched),v("ngModel",s.pointA),a(2),p("ngIf",e.invalid&&(e.dirty||e.touched)),a(4),c(" ",g(13,18,"GRAPHIC.POINT_B")," (x, 1)"),a(2),w("border-red-500",t.invalid&&t.touched),v("ngModel",s.pointB),a(2),p("ngIf",t.invalid&&(t.dirty||t.touched)),a(4),c(" ",g(21,20,"GRAPHIC.POINT_C")," (x, 0)"),a(2),w("border-red-500",i.invalid&&i.touched),v("ngModel",s.pointC),a(2),p("ngIf",i.invalid&&(i.dirty||i.touched)),a(),p("ngIf",s.hasValidationErrors()&&s.functionType==="triangular")}}function Xe(r,n){if(r&1&&(l(0,"div",37),d(1),o()),r&2){let e=u(2);a(),c(" ",e.getOrderErrorMessage()," ")}}function Ne(r,n){if(r&1){let e=S();l(0,"div",8)(1,"div",38)(2,"label",48),d(3),m(4,"translate"),o(),l(5,"input",49),C("ngModelChange",function(i){f(e);let s=u();return b(s.pointA,i)||(s.pointA=i),h(i)}),o()(),l(6,"div",38)(7,"label",50),d(8),m(9,"translate"),o(),l(10,"input",51),C("ngModelChange",function(i){f(e);let s=u();return b(s.pointB,i)||(s.pointB=i),h(i)}),o()(),l(11,"div",38)(12,"label",52),d(13),m(14,"translate"),o(),l(15,"input",53),C("ngModelChange",function(i){f(e);let s=u();return b(s.pointC,i)||(s.pointC=i),h(i)}),o()(),l(16,"div",38)(17,"label",54),d(18),m(19,"translate"),o(),l(20,"input",55),C("ngModelChange",function(i){f(e);let s=u();return b(s.pointD,i)||(s.pointD=i),h(i)}),o()(),l(21,"div",38)(22,"label",56),d(23),m(24,"translate"),o(),l(25,"input",57),C("ngModelChange",function(i){f(e);let s=u();return b(s.pointE,i)||(s.pointE=i),h(i)}),o()(),x(26,Xe,2,1,"div",27),o()}if(r&2){let e=u();a(3),c("",g(4,11,"GRAPHIC.POINT_A")," (x, ?)"),a(2),v("ngModel",e.pointA),a(3),c("",g(9,13,"GRAPHIC.POINT_B")," (x, ?)"),a(2),v("ngModel",e.pointB),a(3),c("",g(14,15,"GRAPHIC.POINT_C")," (x, ?)"),a(2),v("ngModel",e.pointC),a(3),c("",g(19,17,"GRAPHIC.POINT_D")," (x, ?)"),a(2),v("ngModel",e.pointD),a(3),c("",g(24,19,"GRAPHIC.POINT_E")," (x, ?)"),a(2),v("ngModel",e.pointE),a(),p("ngIf",e.hasValidationErrors()&&e.functionType==="sigmoide")}}var j=class r{close=new D;valueAdded=new D;editingValue=null;availableValues=[];nameValue="";functionType="trapezoidal";pointA=null;pointB=null;pointC=null;pointD=null;pointE=null;ngOnInit(){this.editingValue?(this.nameValue=this.editingValue.nameValue,this.functionType=this.editingValue.functionType,this.editingValue.points&&(this.pointA=this.editingValue.points.a,this.pointB=this.editingValue.points.b,this.pointC=this.editingValue.points.c,this.pointD=this.editingValue.points.d,this.pointE=this.editingValue.points.e)):(this.onFunctionTypeChange(),this.nameValue=this.availableValues[0]||"")}onFunctionTypeChange(){this.pointA=null,this.pointB=null,this.pointC=null,this.pointD=null,this.pointE=null}isValid(){if(!this.nameValue)return!1;if(this.functionType==="trapezoidal"){if(this.pointA==null||this.pointB==null||this.pointC==null||this.pointD==null)return!1;let n=this.pointA,e=this.pointB,t=this.pointC,i=this.pointD,s=n>=0&&e>=0&&t>=0&&i>=0,_=n<=e&&e<=t&&t<=i,Z=n<i&&(n<e||e<t||t<i);return s&&_&&Z&&!(n===e&&t===i)&&!(n===e&&e===t)&&!(e===t&&t===i)&&e!==t}else if(this.functionType==="triangular"){if(this.pointA==null||this.pointB==null||this.pointC==null)return!1;let n=this.pointA,e=this.pointB,t=this.pointC,i=n>=0&&e>=0&&t>=0,s=n<=e&&e<=t,_=n<t&&(n<e||e<t);return i&&s&&_}else if(this.functionType==="sigmoide")return this.pointA!==null&&this.pointA>=0&&this.pointB!==null&&this.pointB>=0&&this.pointC!==null&&this.pointC>=0&&this.pointD!==null&&this.pointD>=0&&this.pointE!==null&&this.pointE>=0&&this.pointA<this.pointB&&this.pointB<this.pointC&&this.pointC<this.pointD&&this.pointD<this.pointE;return!1}isValidOrder(){if(this.functionType==="trapezoidal"){if(this.pointA==null||this.pointB==null||this.pointC==null||this.pointD==null)return!1;let n=this.pointA,e=this.pointB,t=this.pointC,i=this.pointD,s=n<=e&&e<=t&&t<=i,_=n<i&&(n<e||e<t||t<i);return s&&_&&!(n===e&&t===i)&&!(n===e&&e===t)&&!(e===t&&t===i)&&e!==t}else if(this.functionType==="triangular"){if(this.pointA==null||this.pointB==null||this.pointC==null)return!1;let n=this.pointA,e=this.pointB,t=this.pointC,i=n<=e&&e<=t,s=n<t&&(n<e||e<t);return i&&s}else if(this.functionType==="sigmoide")return this.pointA!==null&&this.pointB!==null&&this.pointC!==null&&this.pointD!==null&&this.pointE!==null&&this.pointA<this.pointB&&this.pointB<this.pointC&&this.pointC<this.pointD&&this.pointD<this.pointE;return!0}getOrderErrorMessage(){return this.functionType==="trapezoidal"?"Orden requerido: A \u2264 B \u2264 C \u2264 D. No se permite: A=B y C=D, A=B=C, B=C=D ni B=C.":this.functionType==="triangular"?"Orden requerido: A \u2264 B \u2264 C. No se permite A=B=C.":this.functionType==="sigmoide"?"Orden requerido: A < B < C < D < E.":""}hasValidationErrors(){return!!(!this.isValidOrder()&&this.allPointsEntered())}allPointsEntered(){return this.functionType==="trapezoidal"?this.pointA!==null&&this.pointB!==null&&this.pointC!==null&&this.pointD!==null:this.functionType==="triangular"?this.pointA!==null&&this.pointB!==null&&this.pointC!==null:this.functionType==="sigmoide"?this.pointA!==null&&this.pointB!==null&&this.pointC!==null&&this.pointD!==null&&this.pointE!==null:!1}addValue(){if(this.isValid()){let n;this.functionType==="trapezoidal"?n={nameValue:this.nameValue,functionType:this.functionType,points:{a:this.pointA,b:this.pointB,c:this.pointC,d:this.pointD}}:this.functionType==="triangular"?n={nameValue:this.nameValue,functionType:this.functionType,points:{a:this.pointA,b:this.pointB,c:this.pointC}}:this.functionType==="sigmoide"&&(n={nameValue:this.nameValue,functionType:this.functionType,points:{a:this.pointA,b:this.pointB,c:this.pointC,d:this.pointD,e:this.pointE}}),this.valueAdded.emit(n),this.closeModal()}}closeModal(){this.close.emit()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=I({type:r,selectors:[["app-linguistic-value"]],inputs:{editingValue:"editingValue",availableValues:"availableValues"},outputs:{close:"close",valueAdded:"valueAdded"},standalone:!0,features:[M],decls:30,vars:19,consts:[["pointAInput","ngModel"],["pointBInput","ngModel"],["pointCInput","ngModel"],["pointDInput","ngModel"],[1,"fixed","top-0","left-0","w-full","h-full","bg-gray-800","bg-opacity-50","flex","justify-center","items-center","z-50"],[1,"bg-white","rounded-xl","p-8","shadow-2xl","w-full","max-w-xl","transition-all","duration-300"],[1,"text-2xl","text-center","font-bold","text-gray-800","mb-6"],["class","mb-4",4,"ngIf"],[1,"mb-4"],["for","functionTypeModal",1,"block","text-gray-700","font-medium","mb-1","flex","items-center","gap-2"],["text","Elije 'Triangular' si existe solo 1 valor aceptable; 'Trapezoidal' si existe un rango de valores aceptables.","width","w-96"],["id","functionTypeModal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm","focus:outline-none","focus:ring-2","focus:ring-[#0D92F4]","focus:border-transparent",3,"ngModelChange","change","ngModel"],["value","trapezoidal"],["value","triangular"],[1,"flex","justify-end","mt-4"],[1,"bg-blue-500","hover:bg-blue-600","text-white","px-4","py-2","rounded-lg","shadow-md",3,"click","disabled"],[1,"ml-2","bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-lg","shadow-md",3,"click"],["for","linguisticValueModal",1,"block","text-gray-700","font-medium","mb-1"],["id","linguisticValueModal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm","focus:outline-none","focus:ring-2","focus:ring-[#0D92F4]","focus:border-transparent",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"block","text-gray-700","font-medium","mb-1"],[1,"py-2","px-3","border","shadow-sm","text-gray-500","bg-gray-50","border","p-3","rounded-xl"],["type","hidden",3,"ngModelChange","ngModel","value"],["for","pointA_x_modal",1,"block","text-gray-700","font-medium","mb-1","flex","items-center","gap-2"],["imageSrc","/FRUIT/assets/Trapezoidal-Punto A.png","imageAlt","Figura trapezoidal - Punto A","text","","width","w-96"],["type","number","id","pointA_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["for","pointB_x_modal",1,"block","text-gray-700","font-medium","mb-1","flex","items-center","gap-2"],["imageSrc","/FRUIT/assets/Trapezoidal-Punto B.png","imageAlt","Figura trapezoidal - Punto B","text","","width","w-96"],["type","number","id","pointB_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointC_x_modal",1,"block","text-gray-700","font-medium","mb-1","flex","items-center","gap-2"],["imageSrc","/FRUIT/assets/Trapezoidal-Punto C.png","imageAlt","Figura trapezoidal - Punto C","text","","width","w-96"],["type","number","id","pointC_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointD_x_modal",1,"block","text-gray-700","font-medium","mb-1","flex","items-center","gap-2"],["imageSrc","/FRUIT/assets/Trapezoidal-Punto D.png","imageAlt","Figura trapezoidal - Punto D","text","","width","w-96"],["type","number","id","pointD_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],[1,"text-red-500","text-sm","mt-1"],[1,"mb-2"],["for","pointA_t_x_modal",1,"block","text-gray-700","font-medium","mb-1","flex","items-center","gap-2"],["imageSrc","/FRUIT/assets/Triangular - A.png","imageAlt","Figura Triangular - Punto A","text","","width","w-96"],["type","number","id","pointA_t_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointB_t_x_modal",1,"block","text-gray-700","font-medium","mb-1","flex","items-center","gap-2"],["imageSrc","/FRUIT/assets/Triangular - B.png","imageAlt","Figura Triangular - Punto B","text","","width","w-96"],["type","number","id","pointB_t_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointC_t_x_modal",1,"block","text-gray-700","font-medium","mb-1","flex","items-center","gap-2"],["imageSrc","/FRUIT/assets/Triangular - C.png","imageAlt","Figura Triangular - Punto C","text","","width","w-96"],["type","number","id","pointC_t_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointA_s_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointA_s_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointB_s_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointB_s_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointC_s_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointC_s_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointD_s_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointD_s_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointE_s_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointE_s_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"]],template:function(e,t){e&1&&(l(0,"div",4)(1,"div",5)(2,"h6",6),d(3),m(4,"translate"),o(),x(5,Se,6,5,"div",7)(6,Ae,7,6,"div",7),l(7,"div",8)(8,"label",9),V(9,"app-tooltip-info",10),d(10),m(11,"translate"),o(),l(12,"select",11),C("ngModelChange",function(s){return b(t.functionType,s)||(t.functionType=s),s}),y("change",function(){return t.onFunctionTypeChange()}),l(13,"option",12),d(14,"Trapezoidal"),o(),l(15,"option",13),d(16,"Triangular"),o()()(),V(17,"br")(18,"hr")(19,"br"),x(20,Le,34,29,"div",7)(21,Fe,26,22,"div",7)(22,Ne,27,21,"div",7),l(23,"div",14)(24,"button",15),y("click",function(){return t.addValue()}),d(25),m(26,"translate"),o(),l(27,"button",16),y("click",function(){return t.closeModal()}),d(28),m(29,"translate"),o()()()()),e&2&&(a(3),c(" ",g(4,11,t.editingValue?"GRAPHIC.EDIT-VALUE":"GRAPHIC.ADD-VALUE")," "),a(2),p("ngIf",!t.editingValue),a(),p("ngIf",t.editingValue),a(4),c(" ",g(11,13,"GRAPHIC.BELONGING_FUNCTION")," "),a(2),v("ngModel",t.functionType),a(8),p("ngIf",t.functionType==="trapezoidal"),a(),p("ngIf",t.functionType==="triangular"),a(),p("ngIf",t.functionType==="sigmoide"),a(2),p("disabled",!t.isValid()),a(),c(" ",g(26,15,"GRAPHIC.SAVE_CHANGES")," "),a(3),c(" ",g(29,17,"GRAPHIC.CANCEL")," "))},dependencies:[G,de,pe,W,q,se,O,H,z,E,P,k,X,F,U]})};function Re(r,n){r&1&&(l(0,"div"),d(1,"El l\xEDmite del eje X es requerido."),o())}function ke(r,n){if(r&1&&(l(0,"div"),d(1),o()),r&2){let e=u(2);a(),c("Debe ser mayor o igual a ",e.minXLimit,".")}}function We(r,n){if(r&1&&(l(0,"div",14),x(1,Re,2,0,"div",15)(2,ke,2,1,"div",15),o()),r&2){u();let e=A(10);a(),p("ngIf",e.errors==null?null:e.errors.required),a(),p("ngIf",e.errors==null?null:e.errors.min)}}function Oe(r,n){r&1&&(l(0,"div"),d(1,"El salto del eje Y es requerido."),o())}function ze(r,n){r&1&&(l(0,"div"),d(1,"Debe ser mayor o igual a 0.1."),o())}function qe(r,n){r&1&&(l(0,"div"),d(1,"Debe ser menor o igual a 0.5."),o())}function He(r,n){if(r&1&&(l(0,"div",14),x(1,Oe,2,0,"div",15)(2,ze,2,0,"div",15)(3,qe,2,0,"div",15),o()),r&2){u();let e=A(17);a(),p("ngIf",e.errors==null?null:e.errors.required),a(),p("ngIf",e.errors==null?null:e.errors.min),a(),p("ngIf",e.errors==null?null:e.errors.max)}}var Y=class r{close=new D;scaleApplied=new D;initialXLimit=1;initialYStep=.5;maxXFromFunctions=1;xAxisLimit=1;yAxisStep=.5;minXLimit=1;hasCustomXLimit=!1;ngOnInit(){this.xAxisLimit=this.initialXLimit,this.yAxisStep=this.initialYStep,this.minXLimit=this.maxXFromFunctions??this.initialXLimit}ngOnChanges(n){if(n.initialXLimit){let e=n.initialXLimit.currentValue;this.minXLimit=e,this.xAxisLimit<this.minXLimit&&(this.xAxisLimit=this.minXLimit)}n.initialYStep&&(this.yAxisStep=n.initialYStep.currentValue)}applyScale(){this.xAxisLimit>=this.minXLimit&&this.yAxisStep>=.1&&this.yAxisStep<=.5&&(this.scaleApplied.emit({xAxisLimit:this.xAxisLimit,yAxisStep:this.yAxisStep}),this.closeModal())}closeModal(){this.close.emit()}updateMinXLimit(n){this.minXLimit=Math.max(this.minXLimit,n),this.xAxisLimit<this.minXLimit&&(this.xAxisLimit=this.minXLimit)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=I({type:r,selectors:[["app-personalize-scale"]],inputs:{initialXLimit:"initialXLimit",initialYStep:"initialYStep",maxXFromFunctions:"maxXFromFunctions"},outputs:{close:"close",scaleApplied:"scaleApplied"},standalone:!0,features:[$,M],decls:26,vars:25,consts:[["xAxisLimitInput","ngModel"],["yAxisStepInput","ngModel"],[1,"fixed","top-0","left-0","w-full","h-full","bg-gray-800","bg-opacity-50","flex","justify-center","items-center"],[1,"bg-white","rounded-md","p-6","shadow-lg","w-full","max-w-md"],[1,"text-xl","font-bold","text-gray-800","mb-4"],[1,"mb-4"],["for","xAxisLimitModal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","xAxisLimitModal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm","focus:outline-none","focus:ring-2","focus:ring-[#0D92F4]","focus:border-transparent",3,"ngModelChange","ngModel","min"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["for","yAxisStepModal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","yAxisStepModal","required","","min","0.1","max","0.5","step","0.1",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm","focus:outline-none","focus:ring-2","focus:ring-[#0D92F4]","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"flex","justify-end","mt-6"],[1,"bg-blue-500","hover:bg-blue-600","text-white","px-4","py-2","rounded-lg","shadow-md",3,"click","disabled"],[1,"ml-2","bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-lg","shadow-md",3,"click"],[1,"text-red-500","text-sm","mt-1"],[4,"ngIf"]],template:function(e,t){if(e&1){let i=S();l(0,"div",2)(1,"div",3)(2,"h6",4),d(3),m(4,"translate"),o(),l(5,"div",5)(6,"label",6),d(7),m(8,"translate"),o(),l(9,"input",7,0),C("ngModelChange",function(_){return f(i),b(t.xAxisLimit,_)||(t.xAxisLimit=_),h(_)}),o(),x(11,We,3,2,"div",8),o(),l(12,"div",5)(13,"label",9),d(14),m(15,"translate"),o(),l(16,"input",10,1),C("ngModelChange",function(_){return f(i),b(t.yAxisStep,_)||(t.yAxisStep=_),h(_)}),o(),x(18,He,4,3,"div",8),o(),l(19,"div",11)(20,"button",12),y("click",function(){return f(i),h(t.applyScale())}),d(21),m(22,"translate"),o(),l(23,"button",13),y("click",function(){return f(i),h(t.closeModal())}),d(24),m(25,"translate"),o()()()()}if(e&2){let i=A(10),s=A(17);a(3),B(g(4,15,"GRAPHIC.CUSTOM_SCALE")),a(4),B(g(8,17,"GRAPHIC.LIMIT_X")),a(2),w("border-red-500",i.invalid&&i.touched),v("ngModel",t.xAxisLimit),p("min",t.minXLimit),a(2),p("ngIf",i.invalid&&(i.dirty||i.touched)),a(3),c(" ",g(15,19,"GRAPHIC.JUMP_Y")," (min 0.1, max 0.5)"),a(2),w("border-red-500",s.invalid&&s.touched),v("ngModel",t.yAxisStep),a(2),p("ngIf",s.invalid&&(s.dirty||s.touched)),a(2),p("disabled",!i.valid||!s.valid),a(),c(" ",g(22,21,"GRAPHIC.APLICATION")," "),a(3),c(" ",g(25,23,"GRAPHIC.CANCEL")," ")}},dependencies:[G,W,q,O,H,ce,ue,z,E,X,F]})};function Ue(r,n){if(r&1){let e=S();l(0,"div",16)(1,"span",17),d(2),o(),l(3,"button",18),y("click",function(){let i=f(e).$implicit,s=u();return h(s.openEditValueModal(i))}),l(4,"span",19),d(5,"edit"),o()()()}if(r&2){let e=n.$implicit;a(2),B(e.nameValue)}}function je(r,n){r&1&&(l(0,"div",20),d(1),m(2,"translate"),o()),r&2&&(a(),c(" ",g(2,1,"GRAPHIC.NOT_LINGUISTIC_VARIABLE")," "))}function Ye(r,n){if(r&1){let e=S();l(0,"div",21)(1,"app-linguistic-value",22),y("close",function(){f(e);let i=u();return h(i.closeAddValueModal())})("valueAdded",function(i){f(e);let s=u();return h(s.onValueAdded(i))}),o()()}if(r&2){let e=u();a(),p("availableValues",e.currentVariableValues)}}function Qe(r,n){if(r&1){let e=S();l(0,"div",21)(1,"app-linguistic-value",23),y("close",function(){f(e);let i=u();return h(i.closeEditValueModal())})("valueAdded",function(i){f(e);let s=u();return h(s.onValueEdited(i))}),o()()}if(r&2){let e=u();a(),p("availableValues",e.currentVariableValues)("editingValue",e.editingValue)}}function Je(r,n){if(r&1){let e=S();l(0,"div",21)(1,"app-personalize-scale",24),y("scaleApplied",function(i){f(e);let s=u();return h(s.onScaleApplied(i))})("close",function(){f(e);let i=u();return h(i.closeScaleModal())}),o()()}if(r&2){let e=u();a(),p("initialXLimit",e.currentXAxisLimit)("initialYStep",e.currentYAxisStep)("maxXFromFunctions",e.maxXFromFunctions)}}var K=class r{constructor(n,e,t,i,s,_){this.route=n;this.alertService=e;this.gameDataService=t;this.cdr=i;this.graficChartService=s;this.router=_;this.updateXAxisLimit()}modalTitle="Agregar valor ling\xFC\xEDstico";isEditing=!1;selectedLinguisticVariable="";showAddValueModal=!1;showEditValueModal=!1;showScaleModal=!1;currentXAxisLimit=1;currentYAxisStep=.5;initialXLimit=1;initialYStep=.5;chartData={linguisticVariable:"",linguisticValues:[],xAxisLimit:this.currentXAxisLimit,yAxisStep:this.currentYAxisStep};editingValue=null;maxXFromFunctions=0;game_room_id=48;question_id=1;rnf_desc="";currentVariableValues=[];isEditMode=!1;resultData=null;ngOnInit(){this.game_room_id=Number(this.gameDataService.getGameRoomIdLocalStorage())??0,this.question_id=Number(this.gameDataService.getQuestionIDLocalStorage())??0;let e=this.gameDataService.getQuestionsGameLocalStorage()?.find(t=>t.id===this.question_id);if(this.route.queryParams.subscribe(t=>{this.isEditMode=t.edit==="true"}),!this.isEditMode){let t=localStorage.getItem(`editMode_${this.question_id}`);this.isEditMode=t==="true"}if(this.game_room_id===0||this.question_id===0||!e){this.gameDataService.removeGameRoomIdLocalStorage(),this.gameDataService.clearQuestionIDLocalStorage(),this.gameDataService.clearQuestionsGameLocalStorage(),this.gameDataService.clearGameResultLocalStorage(),this.router.navigate(["/game"],{queryParams:{mode:"find"}});return}this.rnf_desc=e.nfr||"",this.selectedLinguisticVariable=e.variable||"",this.currentVariableValues=[e.value,e.recomend],this.chartData.linguisticVariable=this.selectedLinguisticVariable,this.isEditMode?this.graficChartService.getGraficByRoomAndQuestionAndUser(this.game_room_id,this.question_id,-1).subscribe(t=>{t.data.length>0?(this.chartData=t.data[0].data,this.chartData.linguisticVariable=this.selectedLinguisticVariable,this.currentXAxisLimit=this.chartData.xAxisLimit,this.currentYAxisStep=this.chartData.yAxisStep):console.log("No hay datos de la gr\xE1fica para esta sala y pregunta.")},t=>{console.error("Error al obtener la gr\xE1fica:",t.message)}):this.chartData.linguisticVariable=this.selectedLinguisticVariable}backResults(){this.chartData.linguisticValues.length>0&&!confirm("La grafica no se ha guardado. \xBFDesea continuar?")||this.router.navigate(["/results"])}saveGrafic(){if(this.chartData.linguisticValues.length!==2){this.alertService.showAlert("Faltan valores lingu\xEDsticos por graficar.",!0);return}let n={game_room_id:this.game_room_id,question_id:this.question_id,data:this.chartData};this.isEditMode?this.graficChartService.updateGraphics(n).subscribe(()=>{this.alertService.showAlert("Gr\xE1fica actualizada correctamente.",!1),this.router.navigate(["/results"])},e=>{console.error("Error al actualizar la gr\xE1fica:",e.message)}):this.graficChartService.createGraphics(n).subscribe(()=>{this.alertService.showAlert("Gr\xE1fica guardada correctamente.",!1),this.graficChartService.markRnfAsGraphed(this.question_id.toString()),this.router.navigate(["/results"])},e=>{console.error("Error al guardar la gr\xE1fica:",e.message)})}areNewValuesAvailable(){return this.currentVariableValues=this.currentVariableValues.filter(n=>!this.chartData.linguisticValues.some(e=>e.nameValue===n)),this.currentVariableValues.length>0}closeAddValueModal(){this.showAddValueModal=!1}openAddValueModal(){this.editingValue=null,this.showAddValueModal=!0,this.currentVariableValues=this.currentVariableValues.filter(n=>!this.chartData.linguisticValues.some(e=>e.nameValue===n))}openEditValueModal(n){n?(this.editingValue=N(L({},n),{isEditing:!0}),this.modalTitle="Editar valor ling\xFC\xEDstico",this.isEditing=!0):(this.editingValue={isEditing:!1},this.modalTitle="Agregar valor ling\xFC\xEDstico",this.isEditing=!1),this.showEditValueModal=!0}closeEditValueModal(){this.showEditValueModal=!1,this.editingValue=null}onValueAdded(n){this.chartData=N(L({},this.chartData),{linguisticValues:[...this.chartData.linguisticValues,n]}),this.updateXAxisLimit(),this.currentXAxisLimit=Math.max(this.currentXAxisLimit,this.initialXLimit),this.chartData.xAxisLimit=this.currentXAxisLimit}onValueEdited(n){let e=this.chartData.linguisticValues.findIndex(t=>t.nameValue===n.nameValue);if(e!==-1){let t=[...this.chartData.linguisticValues];t[e]=L({},n),this.chartData=N(L({},this.chartData),{linguisticValues:t}),this.updateXAxisLimit(),this.currentXAxisLimit=Math.max(this.currentXAxisLimit,this.initialXLimit),this.chartData.xAxisLimit=this.currentXAxisLimit,this.cdr.detectChanges()}this.closeEditValueModal()}openScaleModal(){this.updateXAxisLimit(),this.initialXLimit=this.currentXAxisLimit,this.initialYStep=this.currentYAxisStep,this.cdr.detectChanges(),this.showScaleModal=!0,this.maxXFromFunctions=this.getMaxXFromAllFunctions()}closeScaleModal(){this.showScaleModal=!1}onScaleApplied(n){this.currentXAxisLimit=n.xAxisLimit,this.currentYAxisStep=n.yAxisStep,this.chartData=N(L({},this.chartData),{xAxisLimit:this.currentXAxisLimit,yAxisStep:this.currentYAxisStep})}updateXAxisLimit(){let n=0;this.chartData.linguisticValues.forEach(e=>{e.functionType==="trapezoidal"&&e.points?n=Math.max(n,e.points.a,e.points.b,e.points.c,e.points.d):e.functionType==="triangular"&&e.points?n=Math.max(n,e.points.a,e.points.b,e.points.c):e.functionType==="sigmoide"&&e.points&&(n=Math.max(n,e.points.a,e.points.b,e.points.c,e.points.d,e.points.e))}),this.initialXLimit=Math.max(1,n),this.currentXAxisLimit<this.initialXLimit&&(this.currentXAxisLimit=this.initialXLimit,this.chartData.xAxisLimit=this.currentXAxisLimit)}getMaxXFromAllFunctions(){let n=0;return this.chartData.linguisticValues.forEach(e=>{e.functionType==="trapezoidal"&&e.points?n=Math.max(n,e.points.a,e.points.b,e.points.c,e.points.d):e.functionType==="triangular"&&e.points?n=Math.max(n,e.points.a,e.points.b,e.points.c):e.functionType==="sigmoide"&&e.points&&(n=Math.max(n,e.points.a,e.points.b,e.points.c,e.points.d,e.points.e))}),n}static \u0275fac=function(e){return new(e||r)(T(oe),T(me),T(le),T(ae),T(ge),T(re))};static \u0275cmp=I({type:r,selectors:[["app-grafic"]],standalone:!0,features:[M],decls:37,vars:32,consts:[[1,"bg-white","rounded-md","p-4","container","mx-auto"],[1,"mb-4","text-xl","font-semibold","text-gray-800"],[1,"bg-white","rounded-md","p-4","flex","items-center","mb-4","justify-between"],[1,"text-left","font-semibold"],[1,"text-left"],[1,"ml-4","min-w-[150px]","text-white","px-4","py-2","rounded-lg",3,"click","disabled","ngClass"],[1,"bg-gray-50","rounded-md","p-4","mb-4"],[1,"col-span-full","mb-1","font-semibold"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","gap-2"],["class","flex items-center justify-between border rounded-xl p-2 bg-white",4,"ngFor","ngForOf"],["class","text-gray-400 italic col-span-full",4,"ngIf"],[1,"mb-4","bg-white","rounded-md","p-4"],[3,"chartData","linguisticVariable"],[1,"ml-4","min-w-[150px]","bg-blue-500","hover:bg-blue-600","text-white","px-4","py-2","rounded-lg","shadow-md",3,"click"],[1,"bg-[#28A745]","hover:bg-green-700","text-white","px-4","py-2","rounded-lg","shadow-md","focus:outline-none","transition","duration-300",3,"click"],["class","fixed top-0 left-0 w-full h-full bg-gray-800 bg-opacity-50 flex justify-center items-center",4,"ngIf"],[1,"flex","items-center","justify-between","border","rounded-xl","p-2","bg-white"],[1,"text-gray-700"],[1,"text-blue-800","font-semibold","py-1","px-2","rounded","focus:outline-none","focus:shadow-outline",3,"click"],[1,"material-icons","text-blue-500"],[1,"text-gray-400","italic","col-span-full"],[1,"fixed","top-0","left-0","w-full","h-full","bg-gray-800","bg-opacity-50","flex","justify-center","items-center"],[3,"close","valueAdded","availableValues"],[3,"close","valueAdded","availableValues","editingValue"],[3,"scaleApplied","close","initialXLimit","initialYStep","maxXFromFunctions"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"div",1),d(2),m(3,"translate"),o(),l(4,"div",2)(5,"div")(6,"label",3),d(7),m(8,"translate"),o(),l(9,"label",4),d(10),o()(),l(11,"button",5),y("click",function(){return t.openAddValueModal()}),d(12),m(13,"translate"),o()(),l(14,"div",6)(15,"div",7),d(16),m(17,"translate"),o(),l(18,"div",8),x(19,Ue,6,1,"div",9)(20,je,3,3,"div",10),o()(),l(21,"div",11),V(22,"app-line-chart",12),o(),l(23,"div",2)(24,"div")(25,"button",13),y("click",function(){return t.backResults()}),d(26),m(27,"translate"),o(),l(28,"button",13),y("click",function(){return t.saveGrafic()}),d(29),m(30,"translate"),o()(),l(31,"button",14),y("click",function(){return t.openScaleModal()}),d(32),m(33,"translate"),o()(),x(34,Ye,2,1,"div",15)(35,Qe,2,2,"div",15)(36,Je,2,3,"div",15),o()),e&2&&(a(2),ne("",g(3,18,"QUESTION.NFR"),": ",t.rnf_desc,""),a(5),c("",g(8,20,"GRAPHIC.LINGUISTIC_VARIABLE"),": "),a(3),B(t.selectedLinguisticVariable),a(),p("disabled",!t.areNewValuesAvailable())("ngClass",t.areNewValuesAvailable()?"shadow-md bg-blue-500 hover:bg-blue-600":"bg-gray-400 text-gray-600 cursor-not-allowed"),a(),c(" ",g(13,22,"GRAPHIC.ADD-VALUE")," "),a(4),c(" ",g(17,24,"GRAPHIC.LINGUISTIC_VALUES")," "),a(3),p("ngForOf",t.chartData.linguisticValues),a(),p("ngIf",t.chartData.linguisticValues.length===0),a(2),p("chartData",t.chartData)("linguisticVariable",t.selectedLinguisticVariable),a(4),c(" ",g(27,26,"GRAPHIC.BACK")," "),a(3),c(" ",g(30,28,"GRAPHIC.SAVE_CHANGES")," "),a(3),c(" ",g(33,30,"GRAPHIC.CUSTOM_SCALE")," "),a(2),p("ngIf",t.showAddValueModal),a(),p("ngIf",t.showEditValueModal),a(),p("ngIf",t.showScaleModal))},dependencies:[P,R,k,E,G,j,Y,fe,X,F]})};export{K as default};
