import{a as ge}from"./chunk-G3YWFFNN.js";import{a as ce}from"./chunk-MR3HQY2Z.js";import{a as W,b as z,e as O,g as q,h as le,i as se,j as de,k as pe,l as ue,m as H,q as G}from"./chunk-LMQWO4W5.js";import{a as re}from"./chunk-7A353QXV.js";import{a as me}from"./chunk-3YFKICGA.js";import{c as X,d as R}from"./chunk-JOV6O4AC.js";import{j as ae,l as oe}from"./chunk-DQ7YWZBQ.js";import{Ab as d,Ac as P,Bb as B,Cb as m,Db as ie,Fb as _,Gb as v,Hb as C,Jb as M,La as te,Qa as i,Qb as c,Ra as E,Rb as g,a as T,ac as ne,b as F,bb as x,eb as p,gb as S,ia as I,ib as l,jb as n,kb as V,nb as A,pb as b,qa as Z,ra as h,rb as u,sa as f,ta as $,tc as N,ua as ee,uc as k,vc as L,za as D,zb as w}from"./chunk-NJXLY5TY.js";function xe(o,r){if(o&1&&V(0,"img",7),o&2){let e=u();p("src",e.imageSrc,te)}}var U=class o{imageSrc="";imageAlt="";text="";width="w-96";static \u0275fac=function(e){return new(e||o)};static \u0275cmp=I({type:o,selectors:[["app-tooltip-info"]],inputs:{imageSrc:"imageSrc",imageAlt:"imageAlt",text:"text",width:"width"},standalone:!0,features:[M],decls:8,vars:3,consts:[[1,"relative","flex-shrink-0"],[1,"inline-block","relative","group","cursor-pointer","pointer-events-auto"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M12 2a10 10 0 100 20 10 10 0 000-20z"],[1,"absolute","left-full","top-1/2","-translate-y-1/2","ml-3","w-96","p-4","bg-white/95","backdrop-blur","border","rounded-lg","shadow-lg","opacity-0","scale-95","group-hover:opacity-100","group-hover:scale-105","transition-all","duration-200","z-50","pointer-events-none",3,"ngClass"],["alt","Imagen Tooltip","class","w-full h-auto rounded mb-3",3,"src",4,"ngIf"],[1,"text-base","text-center","text-gray-700","leading-snug"],["alt","Imagen Tooltip",1,"w-full","h-auto","rounded","mb-3",3,"src"]],template:function(e,a){e&1&&(l(0,"div",0)(1,"div",1),$(),l(2,"svg",2),V(3,"path",3),n(),ee(),l(4,"div",4),x(5,xe,1,1,"img",5),l(6,"p",6),d(7),n()()()()),e&2&&(i(4),p("ngClass",a.width),i(),p("ngIf",a.imageSrc),i(2),m(" ",a.text," "))},dependencies:[P,N,L],encapsulation:2})};function ve(o,r){if(o&1&&(l(0,"option",19),d(1),n()),o&2){let e=r.$implicit;p("value",e),i(),m(" ",e," ")}}function Ce(o,r){if(o&1){let e=A();l(0,"div",8)(1,"label",16),d(2),c(3,"translate"),n(),l(4,"select",17),C("ngModelChange",function(t){h(e);let s=u();return v(s.nameValue,t)||(s.nameValue=t),f(t)}),x(5,ve,2,2,"option",18),n()()}if(o&2){let e=u();i(2),m(" ",g(3,3,"GRAPHIC.LINGUISTIC_VALUE")," "),i(2),_("ngModel",e.nameValue),i(),p("ngForOf",e.availableValues)}}function be(o,r){if(o&1){let e=A();l(0,"div",8)(1,"label",20),d(2),c(3,"translate"),n(),l(4,"div",21),d(5),n(),l(6,"input",22),C("ngModelChange",function(t){h(e);let s=u();return v(s.nameValue,t)||(s.nameValue=t),f(t)}),n()()}if(o&2){let e=u();i(2),m(" ",g(3,4,"GRAPHIC.LINGUISTIC_VALUE"),""),i(3),m(" ",e.editingValue.nameValue," "),i(),_("ngModel",e.nameValue),p("value",e.editingValue.nameValue)}}function ye(o,r){o&1&&(l(0,"div",36),d(1," Debe ser mayor o igual a 0. "),n())}function Ve(o,r){o&1&&(l(0,"div",36),d(1," Debe ser mayor o igual a 0. "),n())}function Ae(o,r){o&1&&(l(0,"div",36),d(1," Debe ser mayor o igual a 0. "),n())}function we(o,r){o&1&&(l(0,"div",36),d(1," Debe ser mayor o igual a 0. "),n())}function Se(o,r){if(o&1&&(l(0,"div",36),d(1),n()),o&2){let e=u(2);i(),m(" ",e.getOrderErrorMessage()," ")}}function Ie(o,r){if(o&1){let e=A();l(0,"div",8)(1,"div",8)(2,"label",23),V(3,"app-tooltip-info",24),d(4),c(5,"translate"),n(),l(6,"input",25,0),C("ngModelChange",function(t){h(e);let s=u();return v(s.pointA,t)||(s.pointA=t),f(t)}),n(),x(8,ye,2,0,"div",26),n(),l(9,"div",8)(10,"label",27),V(11,"app-tooltip-info",28),d(12),c(13,"translate"),n(),l(14,"input",29,1),C("ngModelChange",function(t){h(e);let s=u();return v(s.pointB,t)||(s.pointB=t),f(t)}),n(),x(16,Ve,2,0,"div",26),n(),l(17,"div",8)(18,"label",30),V(19,"app-tooltip-info",31),d(20),c(21,"translate"),n(),l(22,"input",32,2),C("ngModelChange",function(t){h(e);let s=u();return v(s.pointC,t)||(s.pointC=t),f(t)}),n(),x(24,Ae,2,0,"div",26),n(),l(25,"div",8)(26,"label",33),V(27,"app-tooltip-info",34),d(28),c(29,"translate"),n(),l(30,"input",35,3),C("ngModelChange",function(t){h(e);let s=u();return v(s.pointD,t)||(s.pointD=t),f(t)}),n(),x(32,we,2,0,"div",26),n(),x(33,Se,2,1,"div",26),n()}if(o&2){let e=w(7),a=w(15),t=w(23),s=w(31),y=u();i(4),m(" ",g(5,21,"GRAPHIC.POINT_A")," (x, 0) "),i(2),S("border-red-500",e.invalid&&e.touched),_("ngModel",y.pointA),i(2),p("ngIf",e.invalid&&(e.dirty||e.touched)),i(4),m(" ",g(13,23,"GRAPHIC.POINT_B")," (x, 1)"),i(2),S("border-red-500",a.invalid&&a.touched),_("ngModel",y.pointB),i(2),p("ngIf",a.invalid&&(a.dirty||a.touched)),i(4),m(" ",g(21,25,"GRAPHIC.POINT_C")," (x, 1)"),i(2),S("border-red-500",t.invalid&&t.touched),_("ngModel",y.pointC),i(2),p("ngIf",t.invalid&&(t.dirty||t.touched)),i(4),m(" ",g(29,27,"GRAPHIC.POINT_D")," (x, 0)"),i(2),S("border-red-500",s.invalid&&s.touched),_("ngModel",y.pointD),i(2),p("ngIf",s.invalid&&(s.dirty||s.touched)),i(),p("ngIf",y.hasValidationErrors()&&y.functionType==="trapezoidal")}}function Me(o,r){o&1&&(l(0,"div",36),d(1," Debe ser mayor o igual a 0. "),n())}function Le(o,r){o&1&&(l(0,"div",36),d(1," Debe ser mayor o igual a 0. "),n())}function Ee(o,r){o&1&&(l(0,"div",36),d(1," Debe ser mayor o igual a 0. "),n())}function Te(o,r){if(o&1&&(l(0,"div",36),d(1),n()),o&2){let e=u(2);i(),m(" ",e.getOrderErrorMessage()," ")}}function De(o,r){if(o&1){let e=A();l(0,"div",8)(1,"div",37)(2,"label",38),V(3,"app-tooltip-info",39),d(4),c(5,"translate"),n(),l(6,"input",40,0),C("ngModelChange",function(t){h(e);let s=u();return v(s.pointA,t)||(s.pointA=t),f(t)}),n(),x(8,Me,2,0,"div",26),n(),l(9,"div",37)(10,"label",41),V(11,"app-tooltip-info",42),d(12),c(13,"translate"),n(),l(14,"input",43,1),C("ngModelChange",function(t){h(e);let s=u();return v(s.pointB,t)||(s.pointB=t),f(t)}),n(),x(16,Le,2,0,"div",26),n(),l(17,"div",37)(18,"label",44),V(19,"app-tooltip-info",45),d(20),c(21,"translate"),n(),l(22,"input",46,2),C("ngModelChange",function(t){h(e);let s=u();return v(s.pointC,t)||(s.pointC=t),f(t)}),n(),x(24,Ee,2,0,"div",26),n(),x(25,Te,2,1,"div",26),n()}if(o&2){let e=w(7),a=w(15),t=w(23),s=u();i(4),m(" ",g(5,16,"GRAPHIC.POINT_A")," (x, 0)"),i(2),S("border-red-500",e.invalid&&e.touched),_("ngModel",s.pointA),i(2),p("ngIf",e.invalid&&(e.dirty||e.touched)),i(4),m(" ",g(13,18,"GRAPHIC.POINT_B")," (x, 1)"),i(2),S("border-red-500",a.invalid&&a.touched),_("ngModel",s.pointB),i(2),p("ngIf",a.invalid&&(a.dirty||a.touched)),i(4),m(" ",g(21,20,"GRAPHIC.POINT_C")," (x, 0)"),i(2),S("border-red-500",t.invalid&&t.touched),_("ngModel",s.pointC),i(2),p("ngIf",t.invalid&&(t.dirty||t.touched)),i(),p("ngIf",s.hasValidationErrors()&&s.functionType==="triangular")}}function Be(o,r){if(o&1&&(l(0,"div",36),d(1),n()),o&2){let e=u(2);i(),m(" ",e.getOrderErrorMessage()," ")}}function Pe(o,r){if(o&1){let e=A();l(0,"div",8)(1,"div",37)(2,"label",47),d(3),c(4,"translate"),n(),l(5,"input",48),C("ngModelChange",function(t){h(e);let s=u();return v(s.pointA,t)||(s.pointA=t),f(t)}),n()(),l(6,"div",37)(7,"label",49),d(8),c(9,"translate"),n(),l(10,"input",50),C("ngModelChange",function(t){h(e);let s=u();return v(s.pointB,t)||(s.pointB=t),f(t)}),n()(),l(11,"div",37)(12,"label",51),d(13),c(14,"translate"),n(),l(15,"input",52),C("ngModelChange",function(t){h(e);let s=u();return v(s.pointC,t)||(s.pointC=t),f(t)}),n()(),l(16,"div",37)(17,"label",53),d(18),c(19,"translate"),n(),l(20,"input",54),C("ngModelChange",function(t){h(e);let s=u();return v(s.pointD,t)||(s.pointD=t),f(t)}),n()(),l(21,"div",37)(22,"label",55),d(23),c(24,"translate"),n(),l(25,"input",56),C("ngModelChange",function(t){h(e);let s=u();return v(s.pointE,t)||(s.pointE=t),f(t)}),n()(),x(26,Be,2,1,"div",26),n()}if(o&2){let e=u();i(3),m("",g(4,11,"GRAPHIC.POINT_A")," (x, ?)"),i(2),_("ngModel",e.pointA),i(3),m("",g(9,13,"GRAPHIC.POINT_B")," (x, ?)"),i(2),_("ngModel",e.pointB),i(3),m("",g(14,15,"GRAPHIC.POINT_C")," (x, ?)"),i(2),_("ngModel",e.pointC),i(3),m("",g(19,17,"GRAPHIC.POINT_D")," (x, ?)"),i(2),_("ngModel",e.pointD),i(3),m("",g(24,19,"GRAPHIC.POINT_E")," (x, ?)"),i(2),_("ngModel",e.pointE),i(),p("ngIf",e.hasValidationErrors()&&e.functionType==="sigmoide")}}var Y=class o{close=new D;valueAdded=new D;editingValue=null;availableValues=[];nameValue="";functionType="trapezoidal";pointA=null;pointB=null;pointC=null;pointD=null;pointE=null;ngOnInit(){this.editingValue?(this.nameValue=this.editingValue.nameValue,this.functionType=this.editingValue.functionType,this.editingValue.points&&(this.pointA=this.editingValue.points.a,this.pointB=this.editingValue.points.b,this.pointC=this.editingValue.points.c,this.pointD=this.editingValue.points.d,this.pointE=this.editingValue.points.e)):(this.onFunctionTypeChange(),this.nameValue=this.availableValues[0]||"")}onFunctionTypeChange(){this.pointA=null,this.pointB=null,this.pointC=null,this.pointD=null,this.pointE=null}isValid(){return this.nameValue?this.functionType==="trapezoidal"?this.pointA!==null&&this.pointA>=0&&this.pointB!==null&&this.pointB>=0&&this.pointC!==null&&this.pointC>=0&&this.pointD!==null&&this.pointD>=0&&this.pointA<this.pointB&&this.pointB<this.pointC&&this.pointC<this.pointD:this.functionType==="triangular"?this.pointA!==null&&this.pointA>=0&&this.pointB!==null&&this.pointB>=0&&this.pointC!==null&&this.pointC>=0&&this.pointA<this.pointB&&this.pointB<this.pointC:this.functionType==="sigmoide"?this.pointA!==null&&this.pointA>=0&&this.pointB!==null&&this.pointB>=0&&this.pointC!==null&&this.pointC>=0&&this.pointD!==null&&this.pointD>=0&&this.pointE!==null&&this.pointE>=0&&this.pointA<this.pointB&&this.pointB<this.pointC&&this.pointC<this.pointD&&this.pointD<this.pointE:!1:!1}isValidOrder(){return this.functionType==="trapezoidal"?this.pointA!==null&&this.pointB!==null&&this.pointC!==null&&this.pointD!==null&&this.pointA<this.pointB&&this.pointB<this.pointC&&this.pointC<this.pointD:this.functionType==="triangular"?this.pointA!==null&&this.pointB!==null&&this.pointC!==null&&this.pointA<this.pointB&&this.pointB<this.pointC:this.functionType==="sigmoide"?this.pointA!==null&&this.pointB!==null&&this.pointC!==null&&this.pointD!==null&&this.pointE!==null&&this.pointA<this.pointB&&this.pointB<this.pointC&&this.pointC<this.pointD&&this.pointD<this.pointE:!0}getOrderErrorMessage(){return this.functionType==="trapezoidal"?"Los puntos deben estar en orden: A < B < C < D":this.functionType==="triangular"?"Los puntos deben estar en orden: A < B < C":this.functionType==="sigmoide"?"Los puntos deben estar en orden: A < B < C < D < E":""}hasValidationErrors(){return!!(!this.isValidOrder()&&this.allPointsEntered())}allPointsEntered(){return this.functionType==="trapezoidal"?this.pointA!==null&&this.pointB!==null&&this.pointC!==null&&this.pointD!==null:this.functionType==="triangular"?this.pointA!==null&&this.pointB!==null&&this.pointC!==null:this.functionType==="sigmoide"?this.pointA!==null&&this.pointB!==null&&this.pointC!==null&&this.pointD!==null&&this.pointE!==null:!1}addValue(){if(this.isValid()){let r;this.functionType==="trapezoidal"?r={nameValue:this.nameValue,functionType:this.functionType,points:{a:this.pointA,b:this.pointB,c:this.pointC,d:this.pointD}}:this.functionType==="triangular"?r={nameValue:this.nameValue,functionType:this.functionType,points:{a:this.pointA,b:this.pointB,c:this.pointC}}:this.functionType==="sigmoide"&&(r={nameValue:this.nameValue,functionType:this.functionType,points:{a:this.pointA,b:this.pointB,c:this.pointC,d:this.pointD,e:this.pointE}}),this.valueAdded.emit(r),this.closeModal()}}closeModal(){this.close.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=I({type:o,selectors:[["app-linguistic-value"]],inputs:{editingValue:"editingValue",availableValues:"availableValues"},outputs:{close:"close",valueAdded:"valueAdded"},standalone:!0,features:[M],decls:29,vars:19,consts:[["pointAInput","ngModel"],["pointBInput","ngModel"],["pointCInput","ngModel"],["pointDInput","ngModel"],[1,"fixed","top-0","left-0","w-full","h-full","bg-gray-800","bg-opacity-50","flex","justify-center","items-center","z-50"],[1,"bg-white","rounded-xl","p-8","shadow-2xl","w-full","max-w-xl","transition-all","duration-300"],[1,"text-2xl","text-center","font-bold","text-gray-800","mb-6"],["class","mb-4",4,"ngIf"],[1,"mb-4"],["for","functionTypeModal",1,"block","text-gray-700","font-medium","mb-1"],["id","functionTypeModal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm","focus:outline-none","focus:ring-2","focus:ring-[#0D92F4]","focus:border-transparent",3,"ngModelChange","change","ngModel"],["value","trapezoidal"],["value","triangular"],[1,"flex","justify-end","mt-4"],[1,"bg-blue-500","hover:bg-blue-600","text-white","px-4","py-2","rounded-lg","shadow-md",3,"click","disabled"],[1,"ml-2","bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-lg","shadow-md",3,"click"],["for","linguisticValueModal",1,"block","text-gray-700","font-medium","mb-1"],["id","linguisticValueModal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm","focus:outline-none","focus:ring-2","focus:ring-[#0D92F4]","focus:border-transparent",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"block","text-gray-700","font-medium","mb-1"],[1,"py-2","px-3","border","shadow-sm","text-gray-500","bg-gray-50","border","p-3","rounded-xl"],["type","hidden",3,"ngModelChange","ngModel","value"],["for","pointA_x_modal",1,"block","text-gray-700","font-medium","mb-1","flex","items-center","gap-2"],["imageSrc","/FRUIT/assets/Trapezoidal-Punto A.png","imageAlt","Diagrama trapezoidal - Punto A, inicio de la base menor","text","","width","w-96"],["type","number","id","pointA_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["for","pointB_x_modal",1,"block","text-gray-700","font-medium","mb-1","flex","items-center","gap-2"],["imageSrc","/FRUIT/assets/Trapezoidal-Punto B.png","imageAlt","Diagrama trapezoidal - Punto B","text","","width","w-96"],["type","number","id","pointB_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointC_x_modal",1,"block","text-gray-700","font-medium","mb-1","flex","items-center","gap-2"],["imageSrc","/FRUIT/assets/Trapezoidal-Punto C.png","imageAlt","Diagrama trapezoidal - Punto C","text","","width","w-96"],["type","number","id","pointC_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointD_x_modal",1,"block","text-gray-700","font-medium","mb-1","flex","items-center","gap-2"],["imageSrc","/FRUIT/assets/Trapezoidal-Punto D.png","imageAlt","Diagrama trapezoidal - Punto D","text","","width","w-96"],["type","number","id","pointD_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],[1,"text-red-500","text-sm","mt-1"],[1,"mb-2"],["for","pointA_t_x_modal",1,"block","text-gray-700","font-medium","mb-1","flex","items-center","gap-2"],["imageSrc","/FRUIT/assets/Triangular - A.png","imageAlt","Diagrama Triangular - Punto A","text","","width","w-96"],["type","number","id","pointA_t_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointB_t_x_modal",1,"block","text-gray-700","font-medium","mb-1","flex","items-center","gap-2"],["imageSrc","/FRUIT/assets/Triangular - B.png","imageAlt","Diagrama Triangular - Punto B","text","","width","w-96"],["type","number","id","pointB_t_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointC_t_x_modal",1,"block","text-gray-700","font-medium","mb-1","flex","items-center","gap-2"],["imageSrc","/FRUIT/assets/Triangular - C.png","imageAlt","Diagrama Triangular - Punto C","text","","width","w-96"],["type","number","id","pointC_t_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointA_s_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointA_s_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointB_s_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointB_s_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointC_s_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointC_s_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointD_s_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointD_s_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"],["for","pointE_s_x_modal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","pointE_s_x_modal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm",3,"ngModelChange","ngModel"]],template:function(e,a){e&1&&(l(0,"div",4)(1,"div",5)(2,"h6",6),d(3),c(4,"translate"),n(),x(5,Ce,6,5,"div",7)(6,be,7,6,"div",7),l(7,"div",8)(8,"label",9),d(9),c(10,"translate"),n(),l(11,"select",10),C("ngModelChange",function(s){return v(a.functionType,s)||(a.functionType=s),s}),b("change",function(){return a.onFunctionTypeChange()}),l(12,"option",11),d(13,"Trapezoidal"),n(),l(14,"option",12),d(15,"Triangular"),n()()(),V(16,"br")(17,"hr")(18,"br"),x(19,Ie,34,29,"div",7)(20,De,26,22,"div",7)(21,Pe,27,21,"div",7),l(22,"div",13)(23,"button",14),b("click",function(){return a.addValue()}),d(24),c(25,"translate"),n(),l(26,"button",15),b("click",function(){return a.closeModal()}),d(27),c(28,"translate"),n()()()()),e&2&&(i(3),m(" ",g(4,11,a.editingValue?"GRAPHIC.EDIT-VALUE":"GRAPHIC.ADD-VALUE")," "),i(2),p("ngIf",!a.editingValue),i(),p("ngIf",a.editingValue),i(3),m(" ",g(10,13,"GRAPHIC.BELONGING_FUNCTION")," "),i(2),_("ngModel",a.functionType),i(8),p("ngIf",a.functionType==="trapezoidal"),i(),p("ngIf",a.functionType==="triangular"),i(),p("ngIf",a.functionType==="sigmoide"),i(2),p("disabled",!a.isValid()),i(),m(" ",g(25,15,"GRAPHIC.SAVE_CHANGES")," "),i(3),m(" ",g(28,17,"GRAPHIC.CANCEL")," "))},dependencies:[G,se,de,W,q,le,z,H,O,L,P,k,R,X,U]})};function Ge(o,r){o&1&&(l(0,"div"),d(1,"El l\xEDmite del eje X es requerido."),n())}function Xe(o,r){if(o&1&&(l(0,"div"),d(1),n()),o&2){let e=u(2);i(),m("Debe ser mayor o igual a ",e.minXLimit,".")}}function Re(o,r){if(o&1&&(l(0,"div",14),x(1,Ge,2,0,"div",15)(2,Xe,2,1,"div",15),n()),o&2){u();let e=w(10);i(),p("ngIf",e.errors==null?null:e.errors.required),i(),p("ngIf",e.errors==null?null:e.errors.min)}}function Fe(o,r){o&1&&(l(0,"div"),d(1,"El salto del eje Y es requerido."),n())}function Ne(o,r){o&1&&(l(0,"div"),d(1,"Debe ser mayor o igual a 0.1."),n())}function ke(o,r){o&1&&(l(0,"div"),d(1,"Debe ser menor o igual a 0.5."),n())}function We(o,r){if(o&1&&(l(0,"div",14),x(1,Fe,2,0,"div",15)(2,Ne,2,0,"div",15)(3,ke,2,0,"div",15),n()),o&2){u();let e=w(17);i(),p("ngIf",e.errors==null?null:e.errors.required),i(),p("ngIf",e.errors==null?null:e.errors.min),i(),p("ngIf",e.errors==null?null:e.errors.max)}}var j=class o{close=new D;scaleApplied=new D;initialXLimit=1;initialYStep=.5;maxXFromFunctions=1;xAxisLimit=1;yAxisStep=.5;minXLimit=1;hasCustomXLimit=!1;ngOnInit(){this.xAxisLimit=this.initialXLimit,this.yAxisStep=this.initialYStep,this.minXLimit=this.maxXFromFunctions??this.initialXLimit}ngOnChanges(r){if(r.initialXLimit){let e=r.initialXLimit.currentValue;this.minXLimit=e,this.xAxisLimit<this.minXLimit&&(this.xAxisLimit=this.minXLimit)}r.initialYStep&&(this.yAxisStep=r.initialYStep.currentValue)}applyScale(){this.xAxisLimit>=this.minXLimit&&this.yAxisStep>=.1&&this.yAxisStep<=.5&&(this.scaleApplied.emit({xAxisLimit:this.xAxisLimit,yAxisStep:this.yAxisStep}),this.closeModal())}closeModal(){this.close.emit()}updateMinXLimit(r){this.minXLimit=Math.max(this.minXLimit,r),this.xAxisLimit<this.minXLimit&&(this.xAxisLimit=this.minXLimit)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=I({type:o,selectors:[["app-personalize-scale"]],inputs:{initialXLimit:"initialXLimit",initialYStep:"initialYStep",maxXFromFunctions:"maxXFromFunctions"},outputs:{close:"close",scaleApplied:"scaleApplied"},standalone:!0,features:[Z,M],decls:26,vars:25,consts:[["xAxisLimitInput","ngModel"],["yAxisStepInput","ngModel"],[1,"fixed","top-0","left-0","w-full","h-full","bg-gray-800","bg-opacity-50","flex","justify-center","items-center"],[1,"bg-white","rounded-md","p-6","shadow-lg","w-full","max-w-md"],[1,"text-xl","font-bold","text-gray-800","mb-4"],[1,"mb-4"],["for","xAxisLimitModal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","xAxisLimitModal","required","",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm","focus:outline-none","focus:ring-2","focus:ring-[#0D92F4]","focus:border-transparent",3,"ngModelChange","ngModel","min"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["for","yAxisStepModal",1,"block","text-gray-700","font-medium","mb-1"],["type","number","id","yAxisStepModal","required","","min","0.1","max","0.5","step","0.1",1,"w-full","bg-gray-50","p-3","rounded-xl","outline-none","border","shadow-sm","text-gray-700","text-sm","focus:outline-none","focus:ring-2","focus:ring-[#0D92F4]","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"flex","justify-end","mt-6"],[1,"bg-blue-500","hover:bg-blue-600","text-white","px-4","py-2","rounded-lg","shadow-md",3,"click","disabled"],[1,"ml-2","bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-lg","shadow-md",3,"click"],[1,"text-red-500","text-sm","mt-1"],[4,"ngIf"]],template:function(e,a){if(e&1){let t=A();l(0,"div",2)(1,"div",3)(2,"h6",4),d(3),c(4,"translate"),n(),l(5,"div",5)(6,"label",6),d(7),c(8,"translate"),n(),l(9,"input",7,0),C("ngModelChange",function(y){return h(t),v(a.xAxisLimit,y)||(a.xAxisLimit=y),f(y)}),n(),x(11,Re,3,2,"div",8),n(),l(12,"div",5)(13,"label",9),d(14),c(15,"translate"),n(),l(16,"input",10,1),C("ngModelChange",function(y){return h(t),v(a.yAxisStep,y)||(a.yAxisStep=y),f(y)}),n(),x(18,We,4,3,"div",8),n(),l(19,"div",11)(20,"button",12),b("click",function(){return h(t),f(a.applyScale())}),d(21),c(22,"translate"),n(),l(23,"button",13),b("click",function(){return h(t),f(a.closeModal())}),d(24),c(25,"translate"),n()()()()}if(e&2){let t=w(10),s=w(17);i(3),B(g(4,15,"GRAPHIC.CUSTOM_SCALE")),i(4),B(g(8,17,"GRAPHIC.LIMIT_X")),i(2),S("border-red-500",t.invalid&&t.touched),_("ngModel",a.xAxisLimit),p("min",a.minXLimit),i(2),p("ngIf",t.invalid&&(t.dirty||t.touched)),i(3),m(" ",g(15,19,"GRAPHIC.JUMP_Y")," (min 0.1, max 0.5)"),i(2),S("border-red-500",s.invalid&&s.touched),_("ngModel",a.yAxisStep),i(2),p("ngIf",s.invalid&&(s.dirty||s.touched)),i(2),p("disabled",!t.valid||!s.valid),i(),m(" ",g(22,21,"GRAPHIC.APLICATION")," "),i(3),m(" ",g(25,23,"GRAPHIC.CANCEL")," ")}},dependencies:[G,W,q,z,H,ue,pe,O,L,R,X]})};function ze(o,r){if(o&1){let e=A();l(0,"div",16)(1,"span",17),d(2),n(),l(3,"button",18),b("click",function(){let t=h(e).$implicit,s=u();return f(s.openEditValueModal(t))}),l(4,"span",19),d(5,"edit"),n()()()}if(o&2){let e=r.$implicit;i(2),B(e.nameValue)}}function Oe(o,r){o&1&&(l(0,"div",20),d(1),c(2,"translate"),n()),o&2&&(i(),m(" ",g(2,1,"GRAPHIC.NOT_LINGUISTIC_VARIABLE")," "))}function qe(o,r){if(o&1){let e=A();l(0,"div",21)(1,"app-linguistic-value",22),b("close",function(){h(e);let t=u();return f(t.closeAddValueModal())})("valueAdded",function(t){h(e);let s=u();return f(s.onValueAdded(t))}),n()()}if(o&2){let e=u();i(),p("availableValues",e.currentVariableValues)}}function He(o,r){if(o&1){let e=A();l(0,"div",21)(1,"app-linguistic-value",23),b("close",function(){h(e);let t=u();return f(t.closeEditValueModal())})("valueAdded",function(t){h(e);let s=u();return f(s.onValueEdited(t))}),n()()}if(o&2){let e=u();i(),p("availableValues",e.currentVariableValues)("editingValue",e.editingValue)}}function Ue(o,r){if(o&1){let e=A();l(0,"div",21)(1,"app-personalize-scale",24),b("scaleApplied",function(t){h(e);let s=u();return f(s.onScaleApplied(t))})("close",function(){h(e);let t=u();return f(t.closeScaleModal())}),n()()}if(o&2){let e=u();i(),p("initialXLimit",e.currentXAxisLimit)("initialYStep",e.currentYAxisStep)("maxXFromFunctions",e.maxXFromFunctions)}}var K=class o{constructor(r,e,a,t,s,y){this.route=r;this.alertService=e;this.gameDataService=a;this.cdr=t;this.graficChartService=s;this.router=y;this.updateXAxisLimit()}modalTitle="Agregar valor ling\xFC\xEDstico";isEditing=!1;selectedLinguisticVariable="";showAddValueModal=!1;showEditValueModal=!1;showScaleModal=!1;currentXAxisLimit=1;currentYAxisStep=.5;initialXLimit=1;initialYStep=.5;chartData={linguisticVariable:"",linguisticValues:[],xAxisLimit:this.currentXAxisLimit,yAxisStep:this.currentYAxisStep};editingValue=null;maxXFromFunctions=0;game_room_id=48;question_id=1;rnf_desc="";currentVariableValues=[];isEditMode=!1;resultData=null;ngOnInit(){this.game_room_id=Number(this.gameDataService.getGameRoomIdLocalStorage())??0,this.question_id=Number(this.gameDataService.getQuestionIDLocalStorage())??0;let e=this.gameDataService.getQuestionsGameLocalStorage()?.find(a=>a.id===this.question_id);if(this.route.queryParams.subscribe(a=>{this.isEditMode=a.edit==="true"}),!this.isEditMode){let a=localStorage.getItem(`editMode_${this.question_id}`);this.isEditMode=a==="true"}if(this.game_room_id===0||this.question_id===0||!e){this.gameDataService.removeGameRoomIdLocalStorage(),this.gameDataService.clearQuestionIDLocalStorage(),this.gameDataService.clearQuestionsGameLocalStorage(),this.gameDataService.clearGameResultLocalStorage(),this.router.navigate(["/game"],{queryParams:{mode:"find"}});return}this.rnf_desc=e.nfr||"",this.selectedLinguisticVariable=e.variable||"",this.currentVariableValues=[e.value,e.recomend],this.chartData.linguisticVariable=this.selectedLinguisticVariable,this.isEditMode?this.graficChartService.getGraficByRoomAndQuestionAndUser(this.game_room_id,this.question_id,-1).subscribe(a=>{a.data.length>0?(this.chartData=a.data[0].data,this.chartData.linguisticVariable=this.selectedLinguisticVariable,this.currentXAxisLimit=this.chartData.xAxisLimit,this.currentYAxisStep=this.chartData.yAxisStep):console.log("No hay datos de la gr\xE1fica para esta sala y pregunta.")},a=>{console.error("Error al obtener la gr\xE1fica:",a.message)}):this.chartData.linguisticVariable=this.selectedLinguisticVariable}backResults(){this.chartData.linguisticValues.length>0&&!confirm("La grafica no se ha guardado. \xBFDesea continuar?")||this.router.navigate(["/results"])}saveGrafic(){if(this.chartData.linguisticValues.length!==2){this.alertService.showAlert("Faltan valores lingu\xEDsticos por graficar.",!0);return}let r={game_room_id:this.game_room_id,question_id:this.question_id,data:this.chartData};this.isEditMode?this.graficChartService.updateGraphics(r).subscribe(()=>{this.alertService.showAlert("Gr\xE1fica actualizada correctamente.",!1),this.router.navigate(["/results"])},e=>{console.error("Error al actualizar la gr\xE1fica:",e.message)}):this.graficChartService.createGraphics(r).subscribe(()=>{this.alertService.showAlert("Gr\xE1fica guardada correctamente.",!1),this.graficChartService.markRnfAsGraphed(this.question_id.toString()),this.router.navigate(["/results"])},e=>{console.error("Error al guardar la gr\xE1fica:",e.message)})}areNewValuesAvailable(){return this.currentVariableValues=this.currentVariableValues.filter(r=>!this.chartData.linguisticValues.some(e=>e.nameValue===r)),this.currentVariableValues.length>0}closeAddValueModal(){this.showAddValueModal=!1}openAddValueModal(){this.editingValue=null,this.showAddValueModal=!0,this.currentVariableValues=this.currentVariableValues.filter(r=>!this.chartData.linguisticValues.some(e=>e.nameValue===r))}openEditValueModal(r){r?(this.editingValue=F(T({},r),{isEditing:!0}),this.modalTitle="Editar valor ling\xFC\xEDstico",this.isEditing=!0):(this.editingValue={isEditing:!1},this.modalTitle="Agregar valor ling\xFC\xEDstico",this.isEditing=!1),this.showEditValueModal=!0}closeEditValueModal(){this.showEditValueModal=!1,this.editingValue=null}onValueAdded(r){this.chartData=F(T({},this.chartData),{linguisticValues:[...this.chartData.linguisticValues,r]}),this.updateXAxisLimit(),this.currentXAxisLimit=Math.max(this.currentXAxisLimit,this.initialXLimit),this.chartData.xAxisLimit=this.currentXAxisLimit}onValueEdited(r){let e=this.chartData.linguisticValues.findIndex(a=>a.nameValue===r.nameValue);if(e!==-1){let a=[...this.chartData.linguisticValues];a[e]=T({},r),this.chartData=F(T({},this.chartData),{linguisticValues:a}),this.updateXAxisLimit(),this.currentXAxisLimit=Math.max(this.currentXAxisLimit,this.initialXLimit),this.chartData.xAxisLimit=this.currentXAxisLimit,this.cdr.detectChanges()}this.closeEditValueModal()}openScaleModal(){this.updateXAxisLimit(),this.initialXLimit=this.currentXAxisLimit,this.initialYStep=this.currentYAxisStep,this.cdr.detectChanges(),this.showScaleModal=!0,this.maxXFromFunctions=this.getMaxXFromAllFunctions()}closeScaleModal(){this.showScaleModal=!1}onScaleApplied(r){this.currentXAxisLimit=r.xAxisLimit,this.currentYAxisStep=r.yAxisStep,this.chartData=F(T({},this.chartData),{xAxisLimit:this.currentXAxisLimit,yAxisStep:this.currentYAxisStep})}updateXAxisLimit(){let r=0;this.chartData.linguisticValues.forEach(e=>{e.functionType==="trapezoidal"&&e.points?r=Math.max(r,e.points.a,e.points.b,e.points.c,e.points.d):e.functionType==="triangular"&&e.points?r=Math.max(r,e.points.a,e.points.b,e.points.c):e.functionType==="sigmoide"&&e.points&&(r=Math.max(r,e.points.a,e.points.b,e.points.c,e.points.d,e.points.e))}),this.initialXLimit=Math.max(1,r),this.currentXAxisLimit<this.initialXLimit&&(this.currentXAxisLimit=this.initialXLimit,this.chartData.xAxisLimit=this.currentXAxisLimit)}getMaxXFromAllFunctions(){let r=0;return this.chartData.linguisticValues.forEach(e=>{e.functionType==="trapezoidal"&&e.points?r=Math.max(r,e.points.a,e.points.b,e.points.c,e.points.d):e.functionType==="triangular"&&e.points?r=Math.max(r,e.points.a,e.points.b,e.points.c):e.functionType==="sigmoide"&&e.points&&(r=Math.max(r,e.points.a,e.points.b,e.points.c,e.points.d,e.points.e))}),r}static \u0275fac=function(e){return new(e||o)(E(ae),E(me),E(re),E(ne),E(ce),E(oe))};static \u0275cmp=I({type:o,selectors:[["app-grafic"]],standalone:!0,features:[M],decls:37,vars:32,consts:[[1,"bg-white","rounded-md","p-4","container","mx-auto"],[1,"mb-4","text-xl","font-semibold","text-gray-800"],[1,"bg-white","rounded-md","p-4","flex","items-center","mb-4","justify-between"],[1,"text-left","font-semibold"],[1,"text-left"],[1,"ml-4","min-w-[150px]","text-white","px-4","py-2","rounded-lg",3,"click","disabled","ngClass"],[1,"bg-gray-50","rounded-md","p-4","mb-4"],[1,"col-span-full","mb-1","font-semibold"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","gap-2"],["class","flex items-center justify-between border rounded-xl p-2 bg-white",4,"ngFor","ngForOf"],["class","text-gray-400 italic col-span-full",4,"ngIf"],[1,"mb-4","bg-white","rounded-md","p-4"],[3,"chartData","linguisticVariable"],[1,"ml-4","min-w-[150px]","bg-blue-500","hover:bg-blue-600","text-white","px-4","py-2","rounded-lg","shadow-md",3,"click"],[1,"bg-[#28A745]","hover:bg-green-700","text-white","px-4","py-2","rounded-lg","shadow-md","focus:outline-none","transition","duration-300",3,"click"],["class","fixed top-0 left-0 w-full h-full bg-gray-800 bg-opacity-50 flex justify-center items-center",4,"ngIf"],[1,"flex","items-center","justify-between","border","rounded-xl","p-2","bg-white"],[1,"text-gray-700"],[1,"text-blue-800","font-semibold","py-1","px-2","rounded","focus:outline-none","focus:shadow-outline",3,"click"],[1,"material-icons","text-blue-500"],[1,"text-gray-400","italic","col-span-full"],[1,"fixed","top-0","left-0","w-full","h-full","bg-gray-800","bg-opacity-50","flex","justify-center","items-center"],[3,"close","valueAdded","availableValues"],[3,"close","valueAdded","availableValues","editingValue"],[3,"scaleApplied","close","initialXLimit","initialYStep","maxXFromFunctions"]],template:function(e,a){e&1&&(l(0,"div",0)(1,"div",1),d(2),c(3,"translate"),n(),l(4,"div",2)(5,"div")(6,"label",3),d(7),c(8,"translate"),n(),l(9,"label",4),d(10),n()(),l(11,"button",5),b("click",function(){return a.openAddValueModal()}),d(12),c(13,"translate"),n()(),l(14,"div",6)(15,"div",7),d(16),c(17,"translate"),n(),l(18,"div",8),x(19,ze,6,1,"div",9)(20,Oe,3,3,"div",10),n()(),l(21,"div",11),V(22,"app-line-chart",12),n(),l(23,"div",2)(24,"div")(25,"button",13),b("click",function(){return a.backResults()}),d(26),c(27,"translate"),n(),l(28,"button",13),b("click",function(){return a.saveGrafic()}),d(29),c(30,"translate"),n()(),l(31,"button",14),b("click",function(){return a.openScaleModal()}),d(32),c(33,"translate"),n()(),x(34,qe,2,1,"div",15)(35,He,2,2,"div",15)(36,Ue,2,3,"div",15),n()),e&2&&(i(2),ie("",g(3,18,"QUESTION.NFR"),": ",a.rnf_desc,""),i(5),m("",g(8,20,"GRAPHIC.LINGUISTIC_VARIABLE"),": "),i(3),B(a.selectedLinguisticVariable),i(),p("disabled",!a.areNewValuesAvailable())("ngClass",a.areNewValuesAvailable()?"shadow-md bg-blue-500 hover:bg-blue-600":"bg-gray-400 text-gray-600 cursor-not-allowed"),i(),m(" ",g(13,22,"GRAPHIC.ADD-VALUE")," "),i(4),m(" ",g(17,24,"GRAPHIC.LINGUISTIC_VALUES")," "),i(3),p("ngForOf",a.chartData.linguisticValues),i(),p("ngIf",a.chartData.linguisticValues.length===0),i(2),p("chartData",a.chartData)("linguisticVariable",a.selectedLinguisticVariable),i(4),m(" ",g(27,26,"GRAPHIC.BACK")," "),i(3),m(" ",g(30,28,"GRAPHIC.SAVE_CHANGES")," "),i(3),m(" ",g(33,30,"GRAPHIC.CUSTOM_SCALE")," "),i(2),p("ngIf",a.showAddValueModal),i(),p("ngIf",a.showEditValueModal),i(),p("ngIf",a.showScaleModal))},dependencies:[P,N,k,L,G,Y,j,ge,R,X]})};export{K as default};
